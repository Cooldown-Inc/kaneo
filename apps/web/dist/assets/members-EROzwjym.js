import{c as S,v as g,f as P,n as oe,w as U,j as t,t as T,r as R,o as le}from"./index-D6_JMR29.js";import{W as ce}from"./workspace-layout-CWqQ8eYZ.js";import{P as me}from"./page-title-D2qfPOLM.js";import{o as de,a as ue,s as pe}from"./schemas-BanlPZIc.js";import{R as xe,P as he,O as fe,a as ye,T as ge,C as W}from"./index-J3ygd6UU.js";import{u as je}from"./index.esm-C6Qxl6lY.js";import{u as $}from"./useMutation-B_C6xvhR.js";import{B as F}from"./button-EC3LtV52.js";import{a as be,b as ve,c as we,d as ke,e as Ne,F as Ie}from"./form-Bsr6zOGs.js";import{I as Ce}from"./input-BncAdNhM.js";import{X as ze}from"./x-BiMo91W-.js";import{A as H,a as B,b as G,c as J,d as V,e as X,f as Y,g as Z}from"./alert-dialog-Df-VbuAQ.js";import{A as ee,a as te,b as _e}from"./avatar-BVGO6hTJ.js";import{d as Ae,b as Te,T as E,c as Q,e as Se,a as b}from"./table-DYBiuVTu.js";import{T as K}from"./project-icons-C5t--tF0.js";import{u as Fe}from"./useQuery-BDxn_D7I.js";import{c as Me}from"./createLucideIcon-CRcKb1Ol.js";import"./layout-CW2eFLdS.js";import"./en-US-DIdCsyf3.js";import"./create-project-modal-Cne2zI5Z.js";import"./index-Xyhz7DHc.js";import"./index-Dtyx9z7_.js";import"./index-sjf38YVm.js";import"./index-D2z6sO9D.js";import"./badge-DgtRj8pM.js";import"./index-BrfIpMvE.js";import"./search-BHoHnvlf.js";import"./tooltip-CdvJmOJg.js";import"./index-BlCpMXjl.js";import"./index-DlhLTHW_.js";import"./index-Bkpo5cC8.js";import"./index-IN0mQVXW.js";import"./index-DomteP0B.js";import"./index-BnceiTS-.js";import"./index-J_fMdZqQ.js";import"./use-active-workspace-DO0oIQWU.js";import"./users-DuQM-a9l.js";import"./index-6HzwgF_f.js";import"./index-BMwPMg65.js";import"./use-create-workspace-DP7ePvTH.js";import"./create-slug-VE8e1keW.js";import"./chevron-right-Dbn00CNb.js";import"./popover-1qwL5cRb.js";import"./separator-Cv6BfWof.js";import"./sidebar-C6zCFglj.js";import"./loader-circle-DwAUW7-I.js";import"./chevron-down-BSVZ8qIu.js";import"./collapsible-BzsgDJ0n.js";import"./check-IjCBnfdg.js";import"./use-delete-project-WU8lx2qP.js";import"./use-get-projects-CoJzRJjM.js";import"./project-Bb0wcCkA.js";import"./settings-8jW1THm0.js";import"./notification-dropdown-CZcG6wot.js";import"./label-EHONJWOK.js";import"./index-MjJcs9DE.js";import"./user-G-k1XeFN.js";import"./list-gjk-xblB.js";import"./building-2-DuX-XVkM.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],De=Me("user-plus",qe);function Qe(){const s=S.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:Pe,onSuccess:Ke},s[0]=e):e=s[0],$(e)}function Ke(s,e){const{workspaceId:a}=e;g.invalidateQueries({queryKey:["workspace-invites",a]}),g.invalidateQueries({queryKey:["workspace","full",a]}),g.invalidateQueries({queryKey:["workspace-users",a]})}async function Pe(s){const{workspaceId:e,email:a,role:n,resend:o}=s,{data:x,error:c}=await P.organization.inviteMember({email:a,role:n,organizationId:e,resend:o});if(c)throw new Error(c.message||"Failed to invite workspace member");return x}const Ee=de({email:ue()});function Re(s){const e=S.c(49),{open:a,onClose:n}=s,{mutateAsync:o}=Qe(),x=oe(),{workspaceId:c}=U.useParams();let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={resolver:pe(Ee),defaultValues:{email:""}},e[0]=m):m=e[0];const l=je(m);let i,d,u,p,f,r,h,y,v,j,w,k;if(e[1]!==l||e[2]!==o||e[3]!==n||e[4]!==a||e[5]!==x||e[6]!==c){const se=async ae=>{const{email:ne}=ae;try{await o({email:ne,workspaceId:c,role:"member"}),await x.refetchQueries({queryKey:["workspace-users",c]}),T.success("Invitation sent successfully"),L(),n()}catch(ie){const O=ie;T.error(O instanceof Error?O.message:"Failed to invite team member")}},L=async()=>{await x.invalidateQueries({queryKey:["workspace-users",c]}),l.reset()},re=()=>{L(),n()};p=xe,w=a,k=re,u=he,e[19]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(fe,{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40"}),e[19]=j):j=e[19],d=ye,v="fixed z-50 left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-md",h="bg-white dark:bg-zinc-900 rounded-lg shadow-xl";let D;e[20]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(ge,{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:"Invite Team Member"}),e[20]=D):D=e[20],e[21]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-800",children:[D,t.jsx(W,{asChild:!0,className:"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300",children:t.jsx(ze,{size:20})})]}),e[21]=y):y=e[21],i=Ie,r=l,f=l.handleSubmit(se),e[1]=l,e[2]=o,e[3]=n,e[4]=a,e[5]=x,e[6]=c,e[7]=i,e[8]=d,e[9]=u,e[10]=p,e[11]=f,e[12]=r,e[13]=h,e[14]=y,e[15]=v,e[16]=j,e[17]=w,e[18]=k}else i=e[7],d=e[8],u=e[9],p=e[10],f=e[11],r=e[12],h=e[13],y=e[14],v=e[15],j=e[16],w=e[17],k=e[18];let N;e[22]!==l.control?(N=t.jsx("div",{className:"space-y-4",children:t.jsx("div",{children:t.jsx(be,{control:l.control,name:"email",render:Ue})})}),e[22]=l.control,e[23]=N):N=e[23];let M;e[24]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[t.jsx(W,{asChild:!0,children:t.jsx(F,{type:"button",className:"bg-zinc-100 text-zinc-900 hover:bg-zinc-200 dark:bg-zinc-800 dark:text-zinc-100 dark:hover:bg-zinc-700",children:"Cancel"})}),t.jsx(F,{type:"submit",className:"bg-indigo-600 text-white hover:bg-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-400",children:"Send Invitation"})]}),e[24]=M):M=e[24];let I;e[25]!==N||e[26]!==f?(I=t.jsxs("form",{onSubmit:f,className:"p-4",children:[N,M]}),e[25]=N,e[26]=f,e[27]=I):I=e[27];let C;e[28]!==i||e[29]!==I||e[30]!==r?(C=t.jsx(i,{...r,children:I}),e[28]=i,e[29]=I,e[30]=r,e[31]=C):C=e[31];let z;e[32]!==C||e[33]!==h||e[34]!==y?(z=t.jsxs("div",{className:h,children:[y,C]}),e[32]=C,e[33]=h,e[34]=y,e[35]=z):z=e[35];let _;e[36]!==d||e[37]!==z||e[38]!==v?(_=t.jsx(d,{className:v,children:z}),e[36]=d,e[37]=z,e[38]=v,e[39]=_):_=e[39];let A;e[40]!==u||e[41]!==_||e[42]!==j?(A=t.jsxs(u,{children:[j,_]}),e[40]=u,e[41]=_,e[42]=j,e[43]=A):A=e[43];let q;return e[44]!==p||e[45]!==A||e[46]!==w||e[47]!==k?(q=t.jsx(p,{open:w,onOpenChange:k,children:A}),e[44]=p,e[45]=A,e[46]=w,e[47]=k,e[48]=q):q=e[48],q}function Ue(s){const{field:e}=s;return t.jsxs(ve,{children:[t.jsx(we,{className:"block text-sm font-medium text-zinc-900 dark:text-zinc-300 mb-1",children:"Email"}),t.jsx(ke,{children:t.jsx(Ce,{...e,placeholder:"colleague@company.com",className:"bg-white dark:bg-zinc-800/50",autoFocus:!0})}),t.jsx(Ne,{})]})}function $e(){const s=S.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:Oe,onSuccess:Le},s[0]=e):e=s[0],$(e)}function Le(s,e){const{workspaceId:a}=e;g.invalidateQueries({queryKey:["workspace-invites",a]}),g.invalidateQueries({queryKey:["workspace","full",a]}),g.invalidateQueries({queryKey:["workspace-users",a]}),g.invalidateQueries({queryKey:["workspace"]})}async function Oe(s){const{invitationId:e}=s,{data:a,error:n}=await P.organization.cancelInvitation({invitationId:e});if(n)throw new Error(n.message||"Failed to cancel invitation");return a}function We(){const s=S.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:Be,onSuccess:He},s[0]=e):e=s[0],$(e)}function He(s,e){const{workspaceId:a}=e;g.invalidateQueries({queryKey:["workspace-invites",a]}),g.invalidateQueries({queryKey:["workspace","full",a]}),g.invalidateQueries({queryKey:["workspace-users",a]})}async function Be(s){const{workspaceId:e,userId:a}=s,{data:n,error:o}=await P.organization.removeMember({memberIdOrEmail:a,organizationId:e});if(o)throw new Error(o.message||"Failed to remove workspace member");return n}function Ge({invitations:s,users:e}){const[a,n]=R.useState(null),[o,x]=R.useState(null),{user:c}=le(),{workspaceId:m}=U.useParams(),{mutateAsync:l,isPending:i}=We(),{mutateAsync:d,isPending:u}=$e(),p=async()=>{if(a)try{await l({workspaceId:m,userId:a.user.email}),T.success("Team member removed successfully")}catch(r){T.error(r instanceof Error?r.message:"Failed to remove team member")}finally{n(null)}},f=async()=>{if(o)try{await d({invitationId:o.id,workspaceId:m}),T.success("Invitation cancelled successfully")}catch(r){T.error(r instanceof Error?r.message:"Failed to cancel invitation")}finally{x(null)}};return e?.length===0?t.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:t.jsxs("div",{className:"text-center space-y-6",children:[t.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-muted flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"ðŸ‘¥"})}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-xl font-semibold",children:"No team members yet"}),t.jsx("p",{className:"text-muted-foreground",children:"Invite your first team member to get started."})]})]})}):t.jsxs(t.Fragment,{children:[t.jsxs(Ae,{children:[t.jsx(Te,{children:t.jsxs(E,{children:[t.jsx(Q,{className:"text-muted-foreground text-xs w-2/3 pl-6",children:"Name"}),t.jsx(Q,{className:"text-muted-foreground text-xs",children:"Role"}),t.jsx(Q,{className:"text-muted-foreground text-xs",children:"Joined"}),t.jsx(Q,{className:"text-muted-foreground text-xs pr-6 text-right",children:"Actions"})]})}),t.jsxs(Se,{children:[s.filter(r=>r.status!=="accepted"&&r.status!=="canceled")?.map(r=>t.jsxs(E,{className:"cursor-pointer",children:[t.jsx(b,{className:"py-3 pl-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(ee,{className:"h-5 w-5",children:t.jsx(te,{className:"bg-muted text-muted-foreground text-xs",children:r?.email?.charAt(0).toUpperCase()})}),t.jsx("span",{children:r.email})]})}),t.jsx(b,{className:"py-3",children:t.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs bg-muted text-muted-foreground",children:[r.role.charAt(0).toUpperCase()+r.role.slice(1).toLowerCase()," ","(Pending)"]})}),t.jsx(b,{className:"py-3",children:t.jsx("span",{className:"text-sm text-muted-foreground",children:r.expiresAt&&new Date(r.expiresAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}),t.jsx(b,{className:"py-3 pr-6 text-right",children:t.jsx(F,{variant:"ghost",size:"icon",onClick:h=>{h.stopPropagation(),x(r)},className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10","aria-label":"Cancel invitation",children:t.jsx(K,{className:"h-4 w-4"})})})]},r.email)),e?.map(r=>t.jsxs(E,{className:"cursor-pointer",children:[t.jsx(b,{className:"py-3 pl-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(ee,{className:"h-5 w-5",children:[t.jsx(_e,{src:r.user.image??"",alt:r.user.name||""}),t.jsx(te,{className:"bg-muted text-muted-foreground text-xs",children:r?.user?.name?.charAt(0).toUpperCase()})]}),t.jsx("span",{children:r.user.name})]})}),t.jsx(b,{className:"py-3",children:t.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs bg-muted text-muted-foreground",children:r.role.charAt(0).toUpperCase()+r.role.slice(1).toLowerCase()})}),t.jsx(b,{className:"py-3",children:t.jsx("span",{className:"text-sm text-muted-foreground",children:r.createdAt&&new Date(r.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})}),t.jsx(b,{className:"py-3 pr-6 text-right",children:c?.id!==r.userId&&t.jsx(F,{variant:"ghost",size:"icon",onClick:h=>{h.stopPropagation(),n(r)},className:"h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10","aria-label":"Remove member",children:t.jsx(K,{className:"h-4 w-4"})})})]},r.user.email))]})]}),t.jsx(H,{open:!!a,onOpenChange:r=>!r&&n(null),children:t.jsxs(B,{children:[t.jsxs(G,{children:[t.jsx(J,{children:"Remove Team Member?"}),t.jsxs(V,{children:["Are you sure you want to remove"," ",t.jsx("span",{className:"font-medium text-foreground",children:a?.user.name||a?.user.email})," ","from the workspace? This action cannot be undone."]})]}),t.jsxs(X,{children:[t.jsx(Y,{disabled:i,children:"Cancel"}),t.jsxs(Z,{onClick:p,disabled:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[t.jsx(K,{className:"w-4 h-4 mr-2"}),"Remove Member"]})]})]})}),t.jsx(H,{open:!!o,onOpenChange:r=>!r&&x(null),children:t.jsxs(B,{children:[t.jsxs(G,{children:[t.jsx(J,{children:"Cancel Invitation?"}),t.jsxs(V,{children:["Are you sure you want to cancel the invitation for"," ",t.jsx("span",{className:"font-medium text-foreground",children:o?.email}),"? This action cannot be undone."]})]}),t.jsxs(X,{children:[t.jsx(Y,{disabled:u,children:"Cancel"}),t.jsxs(Z,{onClick:f,disabled:u,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[t.jsx(K,{className:"w-4 h-4 mr-2"}),"Cancel Invitation"]})]})]})})]})}function Je(s){const e=S.c(9),{workspaceId:a,workspaceSlug:n,membersLimit:o}=s,x=o===void 0?100:o,c=a||n;let m;e[0]!==c?(m=["workspace","full",c],e[0]=c,e[1]=m):m=e[1];const l=!!(a||n);let i;e[2]!==x||e[3]!==a?(i=async()=>{const{data:u,error:p}=await P.organization.getFullOrganization({query:{organizationId:a,membersLimit:x}});if(p)throw new Error(p.message||"Failed to get full workspace");return u},e[2]=x,e[3]=a,e[4]=i):i=e[4];let d;return e[5]!==m||e[6]!==l||e[7]!==i?(d={queryKey:m,enabled:l,queryFn:i},e[5]=m,e[6]=l,e[7]=i,e[8]=d):d=e[8],Fe(d)}function ts(){const s=S.c(18),{workspaceId:e}=U.useParams();let a;s[0]!==e?(a={workspaceId:e},s[0]=e,s[1]=a):a=s[1];const{data:n}=Je(a),[o,x]=R.useState(!1),c=n?.members,m=n?.invitations;let l;s[2]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(me,{title:"Members"}),s[2]=l):l=s[2];let i;s[3]===Symbol.for("react.memo_cache_sentinel")?(i=()=>x(!0),s[3]=i):i=s[3];let d;s[4]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsxs(F,{onClick:i,variant:"outline",size:"xs",className:"gap-1 w-full md:w-auto",children:[t.jsx(De,{className:"w-3 h-3"}),"Invite member"]}),s[4]=d):d=s[4];let u;s[5]!==c?(u=c??[],s[5]=c,s[6]=u):u=s[6];let p;s[7]!==m?(p=m??[],s[7]=m,s[8]=p):p=s[8];let f;s[9]!==u||s[10]!==p?(f=t.jsx(Ge,{users:u,invitations:p}),s[9]=u,s[10]=p,s[11]=f):f=s[11];let r;s[12]===Symbol.for("react.memo_cache_sentinel")?(r=()=>x(!1),s[12]=r):r=s[12];let h;s[13]!==o?(h=t.jsx(Re,{open:o,onClose:r}),s[13]=o,s[14]=h):h=s[14];let y;return s[15]!==f||s[16]!==h?(y=t.jsxs(t.Fragment,{children:[l,t.jsxs(ce,{title:"Members",headerActions:d,children:[f,h]})]}),s[15]=f,s[16]=h,s[17]=y):y=s[17],y}export{ts as component};
