import{m as x,n as j,r as l,t as c,j as e}from"./index-D6_JMR29.js";import{P as h}from"./page-title-D2qfPOLM.js";import{B as f}from"./button-EC3LtV52.js";import{I as y}from"./input-BncAdNhM.js";import{L as d}from"./label-EHONJWOK.js";import{S as b}from"./separator-Cv6BfWof.js";import{S as g}from"./switch-DE88b5-z.js";import{u as v}from"./use-update-project-DcmMD1Rw.js";import{u as N}from"./use-get-project-BeZMn5W-.js";import{u as w}from"./use-active-workspace-DO0oIQWU.js";import"./index-Dtyx9z7_.js";import"./index-BrfIpMvE.js";import"./index-MjJcs9DE.js";import"./index-Xyhz7DHc.js";import"./index-BlCpMXjl.js";import"./index-D2z6sO9D.js";import"./index-DoArV3ca.js";import"./index-DomteP0B.js";import"./useMutation-B_C6xvhR.js";import"./useQuery-BDxn_D7I.js";function O(){const{projectId:m}=x({strict:!1}),{data:i}=w(),{data:s}=N({id:m||"",workspaceId:i?.id||""}),t=j(),{mutateAsync:o}=v(),r=l.useRef(!1),u=l.useCallback(async()=>{if(s&&!r.current){r.current=!0;try{await o({id:s.id,name:s.name,slug:s.slug,description:s.description||"",icon:s.icon||"Layout",isPublic:!s.isPublic}),await Promise.all([t.invalidateQueries({queryKey:["projects"]}),t.invalidateQueries({queryKey:["projects",i?.id]}),t.invalidateQueries({queryKey:["projects",i?.id,s.id]})]),c.success("Visibility updated")}catch(n){c.error(n instanceof Error?n.message:"Failed to update visibility")}finally{r.current=!1}}},[s,o,t,i?.id]),p=window.location.origin,a=s?.id?`${p}/public-project/${s.id}`:"";return e.jsxs(e.Fragment,{children:[e.jsx(h,{title:"Project Visibility"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Visibility"}),e.jsx("p",{className:"text-muted-foreground",children:"Control who can view and access your project."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-md font-medium",children:"Visibility"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle public access and share the public URL."})]}),e.jsxs("div",{className:"space-y-4 border border-border rounded-md p-4 bg-sidebar",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{className:"text-sm font-medium",children:"Public access"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow anyone with the URL to view this project"})]}),e.jsx(g,{checked:!!s?.isPublic,onCheckedChange:u})]}),e.jsx(b,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(d,{className:"text-sm font-medium",children:"Public URL"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Share this link if the project is public"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{readOnly:!0,value:a,className:"w-96"}),e.jsx(f,{size:"sm",onClick:()=>{a&&navigator.clipboard.writeText(a).then(()=>c.success("Copied"))},children:"Copy"})]})]})]})]})]})]})}export{O as component};
