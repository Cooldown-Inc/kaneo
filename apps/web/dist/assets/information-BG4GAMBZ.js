import{o as v,n as F,r as t,t as d,j as e}from"./index-D6_JMR29.js";import{s as g,o as w,a as u}from"./schemas-BanlPZIc.js";import{u as E}from"./index.esm-C6Qxl6lY.js";import{P}from"./page-title-D2qfPOLM.js";import{A,b as I,a as S}from"./avatar-BVGO6hTJ.js";import{F as C,a as f,b as x,c as p,d as j,e as h}from"./form-Bsr6zOGs.js";import{I as b}from"./input-BncAdNhM.js";import{S as y}from"./separator-Cv6BfWof.js";import{u as R}from"./use-update-user-profile-C93wOKUE.js";import"./index-Bkpo5cC8.js";import"./index-D2z6sO9D.js";import"./index-Xyhz7DHc.js";import"./index-Dtyx9z7_.js";import"./label-EHONJWOK.js";import"./index-MjJcs9DE.js";import"./index-BrfIpMvE.js";import"./useMutation-B_C6xvhR.js";const T=w({name:u().min(1,"Name is required").min(2,"Name must be at least 2 characters"),email:u().email("Invalid email address")});function Y(){const{user:a}=v(),m=F(),{mutateAsync:n}=R(),i=t.useRef(null),c=t.useRef(()=>{}),s=E({resolver:g(T),defaultValues:{name:a?.name||"",email:a?.email||""}});t.useEffect(()=>{a&&!s.formState.isDirty&&s.reset({name:a.name||"",email:a.email||""})},[a,s]);const l=t.useCallback(async r=>{try{await n({name:r.name.trim()}),s.reset(r,{keepDirty:!1}),await m.invalidateQueries({queryKey:["session"]}),d.success("Profile updated successfully")}catch(o){d.error(o instanceof Error?o.message:"Failed to update profile")}},[n,m,s]),N=t.useCallback(r=>{i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{l(r)},1e3)},[l]);return c.current=N,t.useEffect(()=>{const r=s.watch(o=>{s.formState.isDirty&&s.formState.isValid&&c.current?.(o)});return()=>r.unsubscribe()},[s]),t.useEffect(()=>()=>{i.current&&clearTimeout(i.current)},[]),e.jsxs(e.Fragment,{children:[e.jsx(P,{title:"Personal Information"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Personal Information"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your personal details and account information."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-md font-medium",children:"Account Information"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage your profile and account details."})]}),e.jsxs("div",{className:"space-y-4 border border-border rounded-md p-4 bg-sidebar",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx("p",{className:"text-sm font-medium",children:"Profile picture"})}),e.jsxs(A,{className:"h-10 w-10",children:[e.jsx(I,{src:a?.image??"",alt:a?.name||""}),e.jsx(S,{className:"text-xs font-medium border border-border/30",children:a?.name?.charAt(0).toUpperCase()})]})]}),e.jsx(y,{}),e.jsx(C,{...s,children:e.jsxs("form",{className:"space-y-4",children:[e.jsx(f,{control:s.control,name:"name",render:({field:r})=>e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(p,{className:"text-sm font-medium",children:"Full name"})}),e.jsx(j,{children:e.jsx(b,{className:"w-48",placeholder:"Enter your name",...r})})]}),e.jsx(h,{})]})}),e.jsx(y,{}),e.jsx(f,{control:s.control,name:"email",render:({field:r})=>e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-0.5",children:e.jsx(p,{className:"text-sm font-medium",children:"Email"})}),e.jsx(j,{children:e.jsx(b,{className:"w-48",placeholder:"Enter your email",...r,disabled:!0,value:a?.email||""})})]}),e.jsx(h,{})]})})]})})]})]})]})]})}export{Y as component};
