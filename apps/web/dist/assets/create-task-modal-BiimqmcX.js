import{c as $e,u as ot,j as r,d as v,D as F,e as it,r as p,t as V}from"./index-D6_JMR29.js";import{f as ct,d as lt,n as dt,T as ut,H as ft,b as mt,c as pt,L as ht,B as xt,I as gt,U as yt,S as bt,$ as jt,O as vt,o as _t,D as wt,G as kt,g as Nt,u as Ct,C as St}from"./use-get-labels-by-workspace-C9xMoTEH.js";import{B as k}from"./button-EC3LtV52.js";import{a as zt,b as M,T as U,c as E,K as B}from"./tooltip-CdvJmOJg.js";import{L as Pt}from"./list-gjk-xblB.js";import{b as It,C as At}from"./project-icons-C5t--tF0.js";import{A as De,b as Te,a as Oe}from"./avatar-BVGO6hTJ.js";import{D as Lt,a as Dt,b as Tt,c as Ot,d as Ft,B as Mt,e as Ut}from"./badge-DgtRj8pM.js";import{j as Et,k as Bt,B as Fe,i as Rt,P as Ht}from"./create-project-modal-Cne2zI5Z.js";import{I as Kt}from"./input-BncAdNhM.js";import{P as ee,a as te,b as re}from"./popover-1qwL5cRb.js";import{u as $t}from"./useMutation-B_C6xvhR.js";import{u as Wt}from"./use-active-workspace-DO0oIQWU.js";import{g as Me,f as Gt}from"./priority-Bhdual4o.js";import{u as qt}from"./project-Bb0wcCkA.js";import{C as R}from"./check-IjCBnfdg.js";import{U as Xt}from"./user-G-k1XeFN.js";import{c as Jt}from"./createLucideIcon-CRcKb1Ol.js";import{S as Qt}from"./search-BHoHnvlf.js";import{X as Yt}from"./x-BiMo91W-.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Vt=Jt("tag",Zt);var We=Symbol.for("immer-nothing"),Ue=Symbol.for("immer-draftable"),h=Symbol.for("immer-state");function y(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var H=Object.getPrototypeOf;function D(e){return!!e&&!!e[h]}function z(e){return e?Ge(e)||Array.isArray(e)||!!e[Ue]||!!e.constructor?.[Ue]||W(e)||le(e):!1}var er=Object.prototype.constructor.toString(),Ee=new WeakMap;function Ge(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const s=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let n=Ee.get(s);return n===void 0&&(n=Function.toString.call(s),Ee.set(s,n)),n===er}function ae(e,t,s=!0){ce(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function ce(e){const t=e[h];return t?t.type_:Array.isArray(e)?1:W(e)?2:le(e)?3:0}function ye(e,t){return ce(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function qe(e,t,s){const n=ce(e);n===2?e.set(t,s):n===3?e.add(s):e[t]=s}function tr(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function W(e){return e instanceof Map}function le(e){return e instanceof Set}function S(e){return e.copy_||e.base_}function be(e,t){if(W(e))return new Map(e);if(le(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=Ge(e);if(t===!0||t==="class_only"&&!s){const n=Object.getOwnPropertyDescriptors(e);delete n[h];let a=Reflect.ownKeys(n);for(let c=0;c<a.length;c++){const l=a[c],i=n[l];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[l]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[l]})}return Object.create(H(e),n)}else{const n=H(e);if(n!==null&&s)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function ke(e,t=!1){return de(e)||D(e)||!z(e)||(ce(e)>1&&Object.defineProperties(e,{set:se,add:se,clear:se,delete:se}),Object.freeze(e),t&&Object.values(e).forEach(s=>ke(s,!0))),e}function rr(){y(2)}var se={value:rr};function de(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var sr={};function P(e){const t=sr[e];return t||y(0,e),t}var K;function Xe(){return K}function nr(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Be(e,t){t&&(P("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function je(e){ve(e),e.drafts_.forEach(ar),e.drafts_=null}function ve(e){e===K&&(K=e.parent_)}function Re(e){return K=nr(K,e)}function ar(e){const t=e[h];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function He(e,t){t.unfinalizedDrafts_=t.drafts_.length;const s=t.drafts_[0];return e!==void 0&&e!==s?(s[h].modified_&&(je(t),y(4)),z(e)&&(e=oe(t,e),t.parent_||ie(t,e)),t.patches_&&P("Patches").generateReplacementPatches_(s[h].base_,e,t.patches_,t.inversePatches_)):e=oe(t,s,[]),je(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==We?e:void 0}function oe(e,t,s){if(de(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[h];if(!a)return ae(t,(c,l)=>Ke(e,a,t,c,l,s),n),t;if(a.scope_!==e)return t;if(!a.modified_)return ie(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const c=a.copy_;let l=c,i=!1;a.type_===3&&(l=new Set(c),c.clear(),i=!0),ae(l,(f,m)=>Ke(e,a,c,f,m,s,i),n),ie(e,c,!1),s&&e.patches_&&P("Patches").generatePatches_(a,s,e.patches_,e.inversePatches_)}return a.copy_}function Ke(e,t,s,n,a,c,l){if(a==null||typeof a!="object"&&!l)return;const i=de(a);if(!(i&&!l)){if(D(a)){const f=c&&t&&t.type_!==3&&!ye(t.assigned_,n)?c.concat(n):void 0,m=oe(e,a,f);if(qe(s,n,m),D(m))e.canAutoFreeze_=!1;else return}else l&&s.add(a);if(z(a)&&!i){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&i)return;oe(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(W(s)?s.has(n):Object.prototype.propertyIsEnumerable.call(s,n))&&ie(e,a)}}}function ie(e,t,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ke(t,s)}function or(e,t){const s=Array.isArray(e),n={type_:s?1:0,scope_:t?t.scope_:Xe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,c=Ne;s&&(a=[n],c=$);const{revoke:l,proxy:i}=Proxy.revocable(a,c);return n.draft_=i,n.revoke_=l,i}var Ne={get(e,t){if(t===h)return e;const s=S(e);if(!ye(s,t))return ir(e,s,t);const n=s[t];return e.finalized_||!z(n)?n:n===xe(e.base_,t)?(ge(e),e.copy_[t]=we(n,e)):n},has(e,t){return t in S(e)},ownKeys(e){return Reflect.ownKeys(S(e))},set(e,t,s){const n=Je(S(e),t);if(n?.set)return n.set.call(e.draft_,s),!0;if(!e.modified_){const a=xe(S(e),t),c=a?.[h];if(c&&c.base_===s)return e.copy_[t]=s,e.assigned_[t]=!1,!0;if(tr(s,a)&&(s!==void 0||ye(e.base_,t)))return!0;ge(e),_e(e)}return e.copy_[t]===s&&(s!==void 0||t in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=s,e.assigned_[t]=!0),!0},deleteProperty(e,t){return xe(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ge(e),_e(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const s=S(e),n=Reflect.getOwnPropertyDescriptor(s,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:s[t]}},defineProperty(){y(11)},getPrototypeOf(e){return H(e.base_)},setPrototypeOf(){y(12)}},$={};ae(Ne,(e,t)=>{$[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$.deleteProperty=function(e,t){return $.set.call(this,e,t,void 0)};$.set=function(e,t,s){return Ne.set.call(this,e[0],t,s,e[0])};function xe(e,t){const s=e[h];return(s?S(s):e)[t]}function ir(e,t,s){const n=Je(t,s);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function Je(e,t){if(!(t in e))return;let s=H(e);for(;s;){const n=Object.getOwnPropertyDescriptor(s,t);if(n)return n;s=H(s)}}function _e(e){e.modified_||(e.modified_=!0,e.parent_&&_e(e.parent_))}function ge(e){e.copy_||(e.copy_=be(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cr=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,s,n)=>{if(typeof t=="function"&&typeof s!="function"){const c=s;s=t;const l=this;return function(f=c,...m){return l.produce(f,_=>s.call(this,_,...m))}}typeof s!="function"&&y(6),n!==void 0&&typeof n!="function"&&y(7);let a;if(z(t)){const c=Re(this),l=we(t,void 0);let i=!0;try{a=s(l),i=!1}finally{i?je(c):ve(c)}return Be(c,n),He(a,c)}else if(!t||typeof t!="object"){if(a=s(t),a===void 0&&(a=t),a===We&&(a=void 0),this.autoFreeze_&&ke(a,!0),n){const c=[],l=[];P("Patches").generateReplacementPatches_(t,a,c,l),n(c,l)}return a}else y(1,t)},this.produceWithPatches=(t,s)=>{if(typeof t=="function")return(l,...i)=>this.produceWithPatches(l,f=>t(f,...i));let n,a;return[this.produce(t,s,(l,i)=>{n=l,a=i}),n,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){z(e)||y(8),D(e)&&(e=lr(e));const t=Re(this),s=we(e,void 0);return s[h].isManual_=!0,ve(t),s}finishDraft(e,t){const s=e&&e[h];(!s||!s.isManual_)&&y(9);const{scope_:n}=s;return Be(n,t),He(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let s;for(s=t.length-1;s>=0;s--){const a=t[s];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}s>-1&&(t=t.slice(s+1));const n=P("Patches").applyPatches_;return D(e)?n(e,t):this.produce(e,a=>n(a,t))}};function we(e,t){const s=W(e)?P("MapSet").proxyMap_(e,t):le(e)?P("MapSet").proxySet_(e,t):or(e,t);return(t?t.scope_:Xe()).drafts_.push(s),s}function lr(e){return D(e)||y(10,e),Qe(e)}function Qe(e){if(!z(e)||de(e))return e;const t=e[h];let s,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,s=be(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else s=be(e,!0);return ae(s,(a,c)=>{qe(s,a,Qe(c))},n),t&&(t.finalized_=!1),s}var dr=new cr,ur=dr.produce;function fr(e){const t=$e.c(15),{onChange:s,placeholder:n}=e,a=n===void 0?"Add a description...":n,{theme:c}=ot();let l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={initialContent:[{type:"paragraph",content:""}]},t[0]=l):l=t[0];const i=ct(l);let f;t[1]!==i||t[2]!==s?(f=async()=>{try{const g=await i.blocksToMarkdownLossy(i.document);s(g)}catch(g){console.error("Failed to convert blocks to markdown:",g)}},t[1]=i,t[2]=s,t[3]=f):f=t[3];const m=f,_=c;let b;t[4]!==i?(b=r.jsx(lt,{formattingToolbar:()=>r.jsx(zt,{children:r.jsxs("div",{className:"bg-sidebar flex items-center gap-0.5 px-1.5 py-1 rounded-md border border-border shadow-sm",children:[r.jsx("div",{className:"[&_button]:h-6 [&_button]:px-2 [&_button]:text-xs [&_svg]:size-3",children:r.jsx(dt,{items:[{name:"Paragraph",type:"paragraph",icon:ut,props:{},isSelected:br},{name:"Heading 1",type:"heading",icon:ft,props:{level:1},isSelected:yr},{name:"Heading 2",type:"heading",icon:mt,props:{level:2},isSelected:gr},{name:"Heading 3",type:"heading",icon:pt,props:{level:3},isSelected:xr},{name:"Bullet List",type:"bulletListItem",icon:Pt,props:{},isSelected:hr},{name:"Numbered List",type:"numberedListItem",icon:ht,props:{},isSelected:pr}]},"blockTypeSelect")}),r.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),r.jsxs(M,{children:[r.jsx(U,{asChild:!0,children:r.jsx(k,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({bold:!0}),className:v("h-6 w-6 p-0",i.getActiveStyles().bold&&"bg-accent text-accent-foreground"),children:r.jsx(xt,{className:"size-3"})})}),r.jsx(E,{children:r.jsx(B,{keys:[F(),"B"],description:"Bold"})})]}),r.jsxs(M,{children:[r.jsx(U,{asChild:!0,children:r.jsx(k,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({italic:!0}),className:v("h-6 w-6 p-0",i.getActiveStyles().italic&&"bg-accent text-accent-foreground"),children:r.jsx(gt,{className:"size-3"})})}),r.jsx(E,{children:r.jsx(B,{keys:[F(),"I"],description:"Italic"})})]}),r.jsxs(M,{children:[r.jsx(U,{asChild:!0,children:r.jsx(k,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({underline:!0}),className:v("h-6 w-6 p-0",i.getActiveStyles().underline&&"bg-accent text-accent-foreground"),children:r.jsx(yt,{className:"size-3"})})}),r.jsx(E,{children:r.jsx(B,{keys:[F(),"U"],description:"Underline"})})]}),r.jsxs(M,{children:[r.jsx(U,{asChild:!0,children:r.jsx(k,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({code:!0}),className:v("h-6 w-6 p-0",i.getActiveStyles().code&&"bg-accent text-accent-foreground"),children:r.jsx(It,{className:"size-3"})})}),r.jsx(E,{children:r.jsx(B,{keys:[F(),"E"],description:"Code"})})]}),r.jsxs(M,{children:[r.jsx(U,{asChild:!0,children:r.jsx(k,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({strike:!0}),className:v("h-6 w-6 p-0",i.getActiveStyles().strike&&"bg-accent text-accent-foreground"),children:r.jsx(bt,{className:"size-3"})})}),r.jsx(E,{children:r.jsx(B,{keys:[F(),"Shift","X"],description:"Strikethrough"})})]}),r.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),r.jsx(jt,{},"createLinkButton")]})})}),t[4]=i,t[5]=b):b=t[5];let x;t[6]!==i?(x=r.jsx(vt,{triggerCharacter:"/",getItems:async g=>_t(wt(i).filter(mr),g)}),t[6]=i,t[7]=x):x=t[7];let w;return t[8]!==i||t[9]!==m||t[10]!==a||t[11]!==_||t[12]!==b||t[13]!==x?(w=r.jsx("div",{className:"blocknote-transparent h-full overflow-auto",children:r.jsxs(kt,{editor:i,className:"h-full [&>div:first-of-type]:!pl-0 [&>div:first-of-type]:!bg-transparent [&>div:first-of-type]:!h-full","data-placeholder":a,formattingToolbar:!1,linkToolbar:!1,filePanel:!1,sideMenu:!1,slashMenu:!1,tableHandles:!1,theme:_,onChange:m,children:[b,x]})}),t[8]=i,t[9]=m,t[10]=a,t[11]=_,t[12]=b,t[13]=x,t[14]=w):w=t[14],w}function mr(e){return e.group!=="Media"}function pr(e){return e.type==="numberedListItem"}function hr(e){return e.type==="bulletListItem"}function xr(e){return e.type==="heading"&&e.props.level===3}function gr(e){return e.type==="heading"&&e.props.level===2}function yr(e){return e.type==="heading"&&e.props.level===1}function br(e){return e.type==="paragraph"}async function jr(e,t,s,n,a,c,l){const i=await it.task[":projectId"].$post({json:{title:e,description:t,userId:n,status:a,dueDate:c?.toISOString()||void 0,priority:l},param:{projectId:s}});if(!i.ok){const m=await i.text();throw new Error(m)}return await i.json()}function vr(){const e=$e.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t={mutationFn:_r},e[0]=t):t=e[0],$t(t)}function _r(e){const{title:t,description:s,userId:n,projectId:a,status:c,dueDate:l,priority:i}=e;return jr(t,s,a,n??"",c,l?new Date(l):void 0,i)}const ne=[{value:"gray",label:"Stone",color:"#78716c"},{value:"dark-gray",label:"Slate",color:"#64748b"},{value:"purple",label:"Lavender",color:"#8b5cf6"},{value:"teal",label:"Sage",color:"#059669"},{value:"green",label:"Forest",color:"#16a34a"},{value:"yellow",label:"Amber",color:"#d97706"},{value:"orange",label:"Terracotta",color:"#ea580c"},{value:"pink",label:"Rose",color:"#e11d48"},{value:"red",label:"Crimson",color:"#dc2626"}];function Kr({open:e,onClose:t,status:s}){const{project:n,setProject:a}=qt(),{data:c}=Wt(),{mutateAsync:l}=Nt(),{data:i=[]}=Ct(c?.id||""),[f,m]=p.useState(""),[_,b]=p.useState(""),[x,w]=p.useState("no-priority"),[g,T]=p.useState(""),[N,G]=p.useState(void 0),[Ce,Se]=p.useState(!1),[j,I]=p.useState([]),[ue,ze]=p.useState(!1),[q,O]=p.useState("select"),[C,X]=p.useState(""),[fe,J]=p.useState("gray"),[Pe,Q]=p.useState(""),me=p.useRef(null),{mutateAsync:Ye}=vr(),pe=(()=>{const o=i.filter(u=>u.name.toLowerCase().includes(C.toLowerCase())),d=new Map;for(const u of o){const L=d.get(u.name);(!L||u.taskId===null&&L.taskId!==null)&&d.set(u.name,u)}return Array.from(d.values())})(),Ie=C&&!i.some(o=>o.name.toLowerCase()===C.toLowerCase()),he=()=>{m(""),b(""),w("no-priority"),T(""),G(void 0),Se(!1),I([]),O("select"),X(""),J("gray"),Q(""),t()},Ze=async o=>{if(o.preventDefault(),!(!f.trim()||!n?.id||!c?.id))try{const d=s??"to-do",u=await Ye({title:f.trim(),description:_.trim()||"",userId:g,priority:x,projectId:n?.id,dueDate:N?N.toISOString():void 0,status:d});for(const Y of j)try{await l({name:Y.name,color:Y.color,taskId:u.id,workspaceId:c?.id})}catch(Z){console.error("Failed to create label:",Z)}const L=ur(n,Y=>{if(u.status!=="planned"&&u.status!=="archived"){const Z=Y.columns?.find(at=>at.id===u.status);Z&&Z.tasks.push({...u,assigneeId:g,assigneeName:g,position:0})}});a(L),V.success("Task created successfully"),Ce?(m(""),b(""),w("no-priority"),T(""),G(void 0),I([]),O("select"),X(""),J("gray"),Q("")):he()}catch(d){V.error(d instanceof Error?d.message:"Failed to create task")}},Ae=[{value:"no-priority",label:"No Priority"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],Le=Ae.find(o=>o.value===x),A=c?.members?.find(o=>o.userId===g);p.useEffect(()=>{ue&&q==="select"&&me.current&&setTimeout(()=>me.current?.focus(),100)},[ue,q]);const Ve=()=>{O("select"),X(""),Q(""),J("gray")},et=()=>{ze(!1),setTimeout(Ve,200)},tt=o=>{if(j.find(u=>u.name===o))I(j.filter(u=>u.name!==o));else{const u=i.find(L=>L.name===o);u&&I([...j,{id:u.id,name:u.name,color:u.color,taskId:null,workspaceId:u.workspaceId||"",createdAt:u.createdAt}])}},rt=()=>{Q(C),O("color")},st=async o=>{if(J(o),!(!Pe.trim()||!c?.id))try{const d=await l({name:Pe.trim(),color:o,workspaceId:c.id}),u={id:d.id,name:d.name,color:d.color,taskId:d.taskId??null,workspaceId:d.workspaceId??c.id,createdAt:d.createdAt};I([...j,u]),V.success("Label created"),et()}catch(d){V.error(d instanceof Error?d.message:"Failed to create label")}},nt=o=>{I(j.filter(d=>d.name!==o))};return r.jsx(Lt,{open:e,onOpenChange:he,children:r.jsxs(Dt,{className:"max-w-2xl max-h-[90vh] flex flex-col",showCloseButton:!1,children:[r.jsxs(Tt,{className:"flex-shrink-0",children:[r.jsx(Ot,{asChild:!0,children:r.jsx(Et,{children:r.jsxs(Bt,{children:[r.jsx(Fe,{className:"text-zinc-600 dark:text-zinc-400 font-semibold tracking-wider text-sm",children:n?.slug?.toUpperCase()||"TASK"}),r.jsx(Rt,{}),r.jsx(Fe,{className:"text-zinc-700 dark:text-zinc-300 font-medium text-sm",children:"New Task"})]})})}),r.jsx(Ft,{className:"sr-only",children:"Create a new task by providing a title, description, and other details."})]}),r.jsxs("form",{onSubmit:Ze,className:"flex flex-col flex-1 min-h-0 space-y-6",children:[r.jsxs("div",{className:"space-y-6 px-6",children:[r.jsx(Kt,{value:f,onChange:o=>m(o.target.value),autoFocus:!0,placeholder:"Task title",className:"!text-2xl font-semibold !border-0 px-0 py-3 !shadow-none focus-visible:!ring-0 !bg-transparent text-zinc-900 dark:text-white placeholder:text-zinc-500 dark:placeholder:text-zinc-400 tracking-tight focus:!outline-none focus-visible:!outline-none",required:!0}),r.jsx("div",{className:"h-[200px] rounded-lg overflow-hidden",children:r.jsx(fr,{value:_,onChange:b,placeholder:"Add a description for your task..."})}),j.length>0&&r.jsx("div",{className:"flex flex-wrap mb-2",children:j.map(o=>r.jsxs(Mt,{color:o.color,variant:"outline",className:"flex items-center gap-1 pl-3 cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800/50 transition-colors",onClick:()=>nt(o.name),children:[r.jsx("span",{className:"inline-block w-2 h-2 mr-1.5 rounded-full",style:{backgroundColor:ne.find(d=>d.value===o.color)?.color||"#94a3b8"}}),o.name]},o.name))}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 py-2",children:[r.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 bg-accent/50 text-foreground rounded-md text-xs font-medium border border-border",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-foreground rounded-full"}),s?s.charAt(0).toUpperCase()+s.slice(1).replace("-"," "):"In Progress"]}),r.jsxs(ee,{children:[r.jsx(te,{asChild:!0,children:r.jsxs("button",{type:"button",className:v("flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-colors border border-border hover:bg-accent/50",x!=="no-priority"?"bg-accent/30 text-foreground":"text-muted-foreground"),children:[Me(x),r.jsx("span",{children:Le?Le.label:"Priority"})]})}),r.jsx(re,{className:"w-48 p-1",align:"start",children:r.jsx("div",{className:"space-y-1",children:Ae.map(o=>r.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-accent/50 text-left transition-colors h-8",onClick:()=>w(o.value),children:[Me(o.value),r.jsx("span",{className:"text-sm",children:o.label}),x===o.value&&r.jsx(R,{className:"ml-auto h-4 w-4"})]},o.value))})})]}),r.jsxs(ee,{children:[r.jsx(te,{asChild:!0,children:r.jsx("button",{type:"button",className:v("flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-colors border border-border hover:bg-accent/50",A?"bg-accent/30 text-foreground":"text-muted-foreground"),children:A?r.jsxs(r.Fragment,{children:[r.jsxs(De,{className:"h-4 w-4",children:[r.jsx(Te,{src:A?.user?.image??"",alt:A?.user?.name||""}),r.jsx(Oe,{className:"text-[10px] font-medium border border-border/30",children:A?.user?.name?.charAt(0).toUpperCase()||"?"})]}),r.jsx("span",{children:A.user?.name})]}):r.jsxs(r.Fragment,{children:[r.jsx(Xt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Assign"})]})})}),r.jsx(re,{className:"w-48 p-1",align:"start",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-accent/50 text-left transition-colors h-8",onClick:()=>T(""),children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-muted border border-border flex items-center justify-center",title:"Unassigned",children:r.jsx("span",{className:"text-[10px] font-medium text-muted-foreground",children:"?"})}),r.jsx("span",{className:"text-sm",children:"Unassigned"}),!g&&r.jsx(R,{className:"ml-auto h-4 w-4"})]}),c?.members?.map(o=>r.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 px-2 py-1.5 text-sm hover:bg-accent/50 text-left transition-colors h-8",onClick:()=>T(o.userId||""),children:[r.jsxs(De,{className:"h-6 w-6",children:[r.jsx(Te,{src:o?.user?.image??"",alt:o?.user?.name||""}),r.jsx(Oe,{className:"text-xs font-medium border border-border/30",children:o?.user?.name?.charAt(0).toUpperCase()||"?"})]}),r.jsx("span",{className:"text-sm",children:o?.user?.name}),g===o.userId&&r.jsx(R,{className:"ml-auto h-4 w-4"})]},o.userId))]})})]}),r.jsxs(ee,{children:[r.jsx(te,{asChild:!0,children:r.jsxs("button",{type:"button",className:v("flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-colors border border-border hover:bg-accent/50",N?"bg-accent/30 text-foreground":"text-muted-foreground"),children:[r.jsx(At,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:N?Gt(N,"MMM d, yyyy"):"Due date"})]})}),r.jsxs(re,{className:"p-0",align:"start",children:[r.jsx(St,{mode:"single",selected:N,onSelect:G,className:"w-full bg-popover"}),N&&r.jsx("div",{className:"p-2 border-t border-border",children:r.jsx(k,{type:"button",variant:"outline",size:"sm",className:"w-full text-xs",onClick:()=>G(void 0),children:"Clear due date"})})]})]}),r.jsxs(ee,{open:ue,onOpenChange:ze,children:[r.jsx(te,{asChild:!0,children:r.jsxs("button",{type:"button",className:v("flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium rounded-md transition-colors border border-border hover:bg-accent/50",j.length>0?"bg-accent/30 text-foreground":"text-muted-foreground"),children:[r.jsx(Vt,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:"Labels"})]})}),r.jsxs(re,{className:"p-0",align:"start",children:[q==="select"&&r.jsxs("div",{className:"w-auto",children:[r.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-border",children:[r.jsx(Qt,{className:"w-3 h-3 text-muted-foreground"}),r.jsx("input",{ref:me,value:C,onChange:o=>X(o.target.value),placeholder:"Search labels...",className:"w-full bg-transparent border-none text-foreground text-xs focus:outline-none placeholder:text-muted-foreground"})]}),r.jsxs("div",{className:"py-1",children:[pe.length===0&&C.length===0&&r.jsx("span",{className:"text-xs text-muted-foreground px-2",children:"No labels found"}),pe.map(o=>r.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 px-2 py-1.5 text-xs hover:bg-accent/50 text-left",onClick:()=>tt(o.name),children:[r.jsx("div",{className:"flex-shrink-0 w-3 flex justify-center",children:j.some(d=>d.name===o.name)&&r.jsx(R,{className:"w-3 h-3"})}),r.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:ne.find(d=>d.value===o.color)?.color||"#94a3b8"}}),r.jsx("span",{className:"truncate",children:o.name})]},o.id)),Ie&&pe.length>0&&r.jsx("div",{className:"border-t border-border my-1"}),Ie&&r.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 px-2 py-1.5 text-xs hover:bg-accent/50 text-left",onClick:rt,children:[r.jsx("div",{className:"flex-shrink-0 w-3 flex justify-center",children:r.jsx(Ht,{className:"w-3 h-3"})}),r.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:ne.find(o=>o.value===fe)?.color||"#94a3b8"}}),r.jsxs("span",{className:"truncate",children:['Create "',C,'"']})]})]})]}),q==="color"&&r.jsxs("div",{className:"w-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border",children:[r.jsx("span",{className:"text-xs font-medium",children:"Choose color"}),r.jsx("button",{type:"button",onClick:()=>O("select"),className:"w-4 h-4 flex items-center justify-center hover:bg-accent/50 rounded",children:r.jsx(Yt,{className:"h-3 w-3"})})]}),r.jsx("div",{className:"py-1",children:ne.map(o=>r.jsxs("button",{type:"button",className:v("w-full flex items-center gap-2 px-2 py-1.5 text-xs hover:bg-accent/50 text-left",fe===o.value&&"bg-accent/30"),onClick:()=>st(o.value),children:[r.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:o.color}}),r.jsx("span",{className:"truncate",children:o.label}),fe===o.value&&r.jsx(R,{className:"w-3 h-3 ml-auto"})]},o.value))})]})]})]})]})]}),r.jsxs(Ut,{children:[r.jsx("div",{className:"flex items-center gap-3 mr-auto",children:r.jsxs("label",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-zinc-300 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:Ce,onChange:o=>Se(o.target.checked),className:"rounded border-zinc-400 dark:border-zinc-600 bg-white dark:bg-zinc-800 text-indigo-500 focus:ring-indigo-500 focus:ring-offset-0 focus:ring-2 transition-all"}),"Create more"]})}),r.jsx(k,{type:"button",onClick:he,variant:"outline",size:"sm",className:"border-zinc-300 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800",children:"Cancel"}),r.jsx(k,{type:"submit",disabled:!f.trim(),size:"sm",className:"bg-indigo-600 hover:bg-indigo-500 text-white disabled:opacity-50",children:"Create Task"})]})]})]})})}export{Kr as C,ur as p};
