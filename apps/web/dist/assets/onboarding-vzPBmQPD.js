import{r as n,a as W,n as I,u as A,o as P,j as e,f as T,t as c,c as E}from"./index-D6_JMR29.js";import{o as q,a as m,s as R}from"./schemas-BanlPZIc.js";import{u as B}from"./index.esm-C6Qxl6lY.js";import{P as f}from"./page-title-D2qfPOLM.js";import{B as K}from"./button-EC3LtV52.js";import{F as M,a as d,b as l,c as x,d as p,e as u}from"./form-Bsr6zOGs.js";import{I as h}from"./input-BncAdNhM.js";import{u as Q}from"./use-create-workspace-DP7ePvTH.js";import{A as _,m as k}from"./proxy-BpAHTF-W.js";import{C as $}from"./circle-check-CrDXoG6g.js";import"./index-Dtyx9z7_.js";import"./index-BrfIpMvE.js";import"./label-EHONJWOK.js";import"./index-MjJcs9DE.js";import"./index-Xyhz7DHc.js";import"./useMutation-B_C6xvhR.js";import"./create-slug-VE8e1keW.js";import"./createLucideIcon-CRcKb1Ol.js";const D=q({name:m().min(1,"Workspace name is required"),description:m().optional()}),j={initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20}};function L(){const[r,t]=n.useState("workspace"),[b,w]=n.useState(""),g=W(),z=I(),{setActiveWorkspaceId:y}=A(),{mutateAsync:N,isPending:o}=Q(),{user:v}=P(),i=B({resolver:R(D),defaultValues:{name:"",description:""}}),C=async s=>{try{const a=await N({name:s.name.trim(),description:s.description?.trim()||"",userId:v?.id});await z.invalidateQueries({queryKey:["workspaces"]}),await T.organization.setActive({organizationId:a.id}),w(s.name),y(a.id),c.success("Workspace created successfully"),t("success"),setTimeout(()=>{g({to:"/dashboard/workspace/$workspaceId",params:{workspaceId:a.id},replace:!0})},1500)}catch(a){c.error(a instanceof Error?a.message:"Failed to create workspace")}},F=()=>e.jsx(k.div,{variants:j,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3},className:"w-full max-w-sm mx-auto",children:e.jsxs("div",{className:"bg-white/50 dark:bg-zinc-900/50 backdrop-blur-xl rounded-xl border border-zinc-200/50 dark:border-zinc-800/50 p-6 shadow-xl shadow-zinc-200/20 dark:shadow-zinc-950/20",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100 mb-2",children:"Create workspace"}),e.jsx("p",{className:"text-zinc-600 dark:text-zinc-400 text-sm",children:"Set up your workspace to start managing projects"})]}),e.jsx(M,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(C),className:"space-y-3",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(d,{control:i.control,name:"name",render:({field:s})=>e.jsxs(l,{children:[e.jsx(x,{className:"text-sm font-medium",children:"Workspace name"}),e.jsx(p,{children:e.jsx(h,{placeholder:"e.g. Acme Inc, My Team",autoFocus:!0,...s})}),e.jsx(u,{})]})}),e.jsx(d,{control:i.control,name:"description",render:({field:s})=>e.jsxs(l,{children:[e.jsx(x,{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Description (optional)"}),e.jsx(p,{children:e.jsx(h,{placeholder:"What does your team work on?",...s})}),e.jsx(u,{})]})})]}),e.jsx(K,{type:"submit",disabled:o,className:"w-full mt-4",children:o?"Creating...":"Create workspace"})]})})]})},"workspace"),S=()=>e.jsx(k.div,{variants:j,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.3},className:"w-full max-w-sm mx-auto",children:e.jsx("div",{className:"bg-white/50 dark:bg-zinc-900/50 backdrop-blur-xl rounded-xl border border-zinc-200/50 dark:border-zinc-800/50 p-6 shadow-xl shadow-zinc-200/20 dark:shadow-zinc-950/20",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx($,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-xl font-bold text-zinc-900 dark:text-zinc-100",children:"Workspace created"}),e.jsxs("p",{className:"text-zinc-600 dark:text-zinc-400 text-sm",children:["Taking you to ",e.jsx("strong",{children:b}),"..."]})]}),e.jsx("div",{className:"w-6 h-6 mx-auto",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-zinc-200 dark:border-zinc-700 border-t-zinc-600 dark:border-t-zinc-300"})})]})})},"success");return e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Create Workspace"}),e.jsx("div",{className:"min-h-screen w-full bg-gradient-to-b from-zinc-100 to-white dark:from-zinc-900 dark:to-zinc-950 flex flex-col items-center justify-center p-4",children:e.jsxs(_,{mode:"wait",children:[r==="workspace"&&F(),r==="success"&&S()]})})]})}function me(){const r=E.c(1);let t;return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Welcome to Kaneo"}),e.jsx(L,{})]}),r[0]=t):t=r[0],t}export{me as component};
