import{e as b,x as y,j as e,d as z,c as I,n as X,v as se,t as u,y as te}from"./index-D6_JMR29.js";import{P as re}from"./page-title-D2qfPOLM.js";import{o as ae,a as V,s as ie}from"./schemas-BanlPZIc.js";import{u as ne}from"./index.esm-C6Qxl6lY.js";import{u as H}from"./useQuery-BDxn_D7I.js";import{A as oe,b as le,a as ce}from"./avatar-BVGO6hTJ.js";import{D as me,a as de,b as ue,c as xe,d as pe,B as P}from"./badge-DgtRj8pM.js";import{B as p}from"./button-EC3LtV52.js";import{I as E}from"./input-BncAdNhM.js";import{S as f}from"./separator-Cv6BfWof.js";import{G as M,S as O,a as he}from"./search-BHoHnvlf.js";import{E as S}from"./external-link-3k5nfLUc.js";import{c as C}from"./createLucideIcon-CRcKb1Ol.js";import{C as fe}from"./clock-XCZt0uXC.js";import{C as ge}from"./check-IjCBnfdg.js";import{S as je}from"./settings-8jW1THm0.js";import{F as ye,a as T,b as L,c as B,d as U,e as K}from"./form-Bsr6zOGs.js";import{u as _}from"./useMutation-B_C6xvhR.js";import{G as be}from"./github-DV800XGA.js";import{T as Q,R as Z}from"./triangle-alert-B0KfKaVO.js";import"./index-Bkpo5cC8.js";import"./index-D2z6sO9D.js";import"./index-Xyhz7DHc.js";import"./index-Dtyx9z7_.js";import"./index-J3ygd6UU.js";import"./index-BlCpMXjl.js";import"./index-sjf38YVm.js";import"./index-DlhLTHW_.js";import"./index-BnceiTS-.js";import"./x-BiMo91W-.js";import"./index-BrfIpMvE.js";import"./label-EHONJWOK.js";import"./index-MjJcs9DE.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],q=C("circle-check-big",Ne);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],A=C("circle-x",we);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],ke=C("import",ve);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Ce=C("link",Ie);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Se=C("lock",Ge);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],_e=C("unlink",Re);async function Fe(){const t=await b["github-integration"]["app-info"].$get();if(!t.ok){const a=await t.text();throw new Error(a)}return await t.json()}async function $e(){const t=await b["github-integration"].repositories.$get();if(!t.ok){const a=await t.text();throw new Error(a)}return await t.json()}function qe({open:t,onOpenChange:s,onSelectRepository:a,selectedRepository:n}){const[o,c]=y.useState(""),{data:m,isLoading:N,error:R,refetch:F}=H({queryKey:["github-repositories"],queryFn:$e,enabled:t}),{data:w}=H({queryKey:["github-app-info"],queryFn:Fe,enabled:t}),i=y.useMemo(()=>{if(!m?.repositories)return[];if(!o)return m.repositories;const r=o.toLowerCase();return m.repositories.filter(d=>d.full_name.toLowerCase().includes(r)||d.description?.toLowerCase().includes(r))},[m?.repositories,o]),v=r=>{a({owner:r.owner.login,name:r.name}),s(!1)},$=r=>{const d=new Date(r),x=Math.floor((new Date().getTime()-d.getTime())/1e3);return x<60?"just now":x<3600?`${Math.floor(x/60)}m ago`:x<86400?`${Math.floor(x/3600)}h ago`:x<2592e3?`${Math.floor(x/86400)}d ago`:d.toLocaleDateString()},G=r=>{r||c(""),s(r)};return e.jsx(me,{open:t,onOpenChange:G,children:e.jsxs(de,{className:"!max-w-2xl max-h-[85vh] p-0 gap-0 flex flex-col",children:[e.jsxs(ue,{className:"px-6 pt-6 pb-4",children:[e.jsxs(xe,{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5"}),"Select Repository"]}),e.jsx(pe,{className:"mt-1.5",children:"Choose a repository where your GitHub App is installed to enable issue synchronization."})]}),e.jsx(f,{}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(E,{placeholder:"Search repositories...",value:o,onChange:r=>c(r.target.value),className:"pl-10"})]})}),e.jsx(f,{}),e.jsxs("div",{className:"flex-1 overflow-y-auto min-h-[300px]",children:[N&&e.jsx("div",{className:"px-6 py-4 space-y-3",children:Array.from({length:5},(r,d)=>e.jsx("div",{className:"p-4 border border-border rounded-md bg-sidebar animate-pulse",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-48 h-4 bg-muted rounded mb-2"}),e.jsx("div",{className:"w-32 h-3 bg-muted rounded"})]})]})},`loading-skeleton-repo-${d}-${Date.now()}`))}),R&&e.jsxs("div",{className:"text-center py-12 px-6",children:[e.jsx("div",{className:"text-destructive mb-3 font-medium",children:"Failed to load repositories"}),e.jsx(p,{variant:"outline",onClick:()=>F(),children:"Try Again"})]}),m&&!N&&e.jsxs(e.Fragment,{children:[m.repositories.length===0&&e.jsxs("div",{className:"text-center py-12 px-6",children:[e.jsx(M,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No repositories found"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-6 max-w-md mx-auto",children:"Install the GitHub App on your repositories to see them here."}),w?.appName&&e.jsxs(p,{onClick:()=>window.open(`https://github.com/apps/${w.appName}`,"_blank"),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Install GitHub App"]})]}),i.length>0&&e.jsx("div",{className:"px-6 py-4 space-y-2",children:i.map(r=>e.jsx("button",{type:"button",onClick:()=>v(r),className:z("w-full p-4 border rounded-md text-left transition-colors group bg-sidebar","hover:bg-accent focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",n===r.full_name?"border-primary bg-accent":"border-border"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsxs(oe,{className:"w-8 h-8 flex-shrink-0",children:[e.jsx(le,{src:r.owner.avatar_url}),e.jsx(ce,{children:r.owner.login.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium truncate",children:r.full_name}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[r.private?e.jsx(Se,{className:"w-3 h-3 text-muted-foreground"}):e.jsx(he,{className:"w-3 h-3 text-muted-foreground"}),e.jsx(P,{variant:"secondary",className:"text-xs",children:r.owner.type})]})]}),r.description&&e.jsx("p",{className:"text-sm text-muted-foreground truncate mb-1",children:r.description}),e.jsx("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(fe,{className:"w-3 h-3"}),"Updated ",$(r.updated_at)]})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-3",children:[n===r.full_name&&e.jsx(ge,{className:"w-4 h-4 text-primary"}),e.jsx(p,{variant:"ghost",size:"sm",onClick:d=>{d.stopPropagation(),window.open(r.html_url,"_blank")},className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(S,{className:"w-4 h-4"})})]})]})},r.id))}),i.length===0&&m.repositories.length>0&&e.jsxs("div",{className:"text-center py-12 px-6",children:[e.jsx(O,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No repositories match your search"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Try adjusting your search terms or clear the search to see all repositories."})]})]})]}),m&&m.installations.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:[m.repositories.length," repositories across"," ",m.installations.length," installations"]}),e.jsxs(p,{variant:"ghost",size:"sm",onClick:()=>window.open("https://github.com/settings/installations","_blank"),children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Manage Installations"]})]})})]})]})})}async function Ae(t,s){const a=await b["github-integration"].project[":projectId"].$post({param:{projectId:t},json:s});if(!a.ok){const o=await a.text();throw new Error(o)}return await a.json()}async function ze(t){const s=await b["github-integration"].project[":projectId"].$delete({param:{projectId:t}});if(!s.ok){const n=await s.text();throw new Error(n)}return await s.json()}async function He(t){const s=await b["github-integration"].verify.$post({json:t});if(!s.ok){const n=await s.json();throw new Error(n.message||"Request failed")}return await s.json()}function Pe(){const t=I.c(2),s=X();let a;return t[0]!==s?(a={mutationFn:Ee,onSuccess:(n,o)=>{const{projectId:c}=o;s.invalidateQueries({queryKey:["github-integration",c]})}},t[0]=s,t[1]=a):a=t[1],_(a)}function Ee(t){const{projectId:s,data:a}=t;return Ae(s,a)}function Me(){const t=I.c(2),s=X();let a;return t[0]!==s?(a={mutationFn:De,onSuccess:(n,o)=>{s.invalidateQueries({queryKey:["github-integration",o]})}},t[0]=s,t[1]=a):a=t[1],_(a)}function De(t){return ze(t)}function Ve(){const t=I.c(1);let s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s={mutationFn:Oe},t[0]=s):s=t[0],_(s)}function Oe(t){return He(t)}async function Te(t){const s=await b["github-integration"]["import-issues"].$post({json:t});if(!s.ok){const n=await s.text();throw new Error(n)}return await s.json()}function Le(){const t=I.c(1);let s;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s={mutationFn:Te,onSuccess:Be},t[0]=s):s=t[0],_(s)}function Be(){se.invalidateQueries({queryKey:["tasks"]})}async function Ue(t){const s=await b["github-integration"].project[":projectId"].$get({param:{projectId:t}});if(!s.ok){const n=await s.text();throw new Error(n)}return await s.json()}function Ke(t){const s=I.c(7);let a,n;s[0]!==t?(a=["github-integration",t],n=()=>Ue(t),s[0]=t,s[1]=a,s[2]=n):(a=s[1],n=s[2]);const o=!!t;let c;return s[3]!==a||s[4]!==n||s[5]!==o?(c={queryKey:a,queryFn:n,enabled:o},s[3]=a,s[4]=n,s[5]=o,s[6]=c):c=s[6],H(c)}const Qe=ae({repositoryOwner:V().min(1,"Repository owner is required").regex(/^[a-zA-Z0-9-]+$/,"Invalid repository owner format"),repositoryName:V().min(1,"Repository name is required").regex(/^[a-zA-Z0-9._-]+$/,"Invalid repository name format")});function Ze({projectId:t}){const{data:s,isLoading:a}=Ke(t),{mutateAsync:n,isPending:o}=Pe(),{mutateAsync:c,isPending:m}=Me(),{mutateAsync:N,isPending:R}=Ve(),{mutateAsync:F,isPending:w}=Le(),[i,v]=y.useState(null),[$,G]=y.useState(!1),r=ne({resolver:ie(Qe),defaultValues:{repositoryOwner:s?.repositoryOwner||"",repositoryName:s?.repositoryName||""}});y.useEffect(()=>{s&&r.reset({repositoryOwner:s.repositoryOwner,repositoryName:s.repositoryName})},[s,r]);const d=r.watch("repositoryOwner"),k=r.watch("repositoryName"),x=y.useCallback(async(l,h=!0)=>{try{const j=await N(l);v(j),h&&(j.isInstalled&&j.hasRequiredPermissions?u.success("GitHub App is properly installed!"):j.isInstalled?u.warning("GitHub App is installed but missing required permissions"):j.repositoryExists?u.warning("GitHub App needs to be installed on this repository"):u.error("Repository not found or not accessible"))}catch(j){h&&u.error(j instanceof Error?j.message:"Failed to verify GitHub installation"),v(null)}},[N]);y.useEffect(()=>{d&&k&&r.formState.isValid&&x({repositoryOwner:d,repositoryName:k},!1)},[d,k,r.formState.isValid,x]);const J=l=>{r.setValue("repositoryOwner",l.owner,{shouldValidate:!0,shouldDirty:!0,shouldTouch:!0}),r.setValue("repositoryName",l.name,{shouldValidate:!0,shouldDirty:!0,shouldTouch:!0}),G(!1),v(null)},W=async l=>{try{const h=await N(l);if(!h.isInstalled){u.error("Please install the GitHub App on this repository first");return}if(!h.hasRequiredPermissions){u.error(`GitHub App is missing required permissions: ${h.missingPermissions?.join(", ")||"issues"}. Please update the app permissions.`);return}await n({projectId:t,data:l}),u.success("GitHub integration updated successfully")}catch(h){u.error(h instanceof Error?h.message:"Failed to update GitHub integration")}},Y=async()=>{try{await c(t),r.reset({repositoryOwner:"",repositoryName:""}),v(null),u.success("GitHub integration removed successfully")}catch(l){u.error(l instanceof Error?l.message:"Failed to remove GitHub integration")}},ee=async()=>{try{await F({projectId:t}),u.success("Issues imported successfully")}catch(l){u.error(l instanceof Error?l.message:"Failed to import issues")}};if(a)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-4 border border-border rounded-md p-4 bg-sidebar",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-40"}),e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-full"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse w-full"})]})}),e.jsx("div",{className:"space-y-4 border border-border rounded-md p-4 bg-sidebar",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse w-40"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse w-full"}),e.jsx("div",{className:"h-10 bg-muted rounded animate-pulse w-full"})]})})]});const g=!!s&&s.isActive,D=g&&i?.isInstalled&&i?.hasRequiredPermissions;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-4 border border-border rounded-md p-4 bg-sidebar",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-medium",children:"Connection Status"}),g?e.jsx("p",{className:"text-xs text-muted-foreground",children:"Repository connected and active"}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"No repository connected"})]}),e.jsx("div",{className:"flex items-center gap-3",children:g?e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(P,{variant:"secondary",className:"gap-1",children:[e.jsx(q,{className:"w-3 h-3"}),"Connected"]})}):e.jsxs(P,{variant:"outline",className:"gap-1",children:[e.jsx(A,{className:"w-3 h-3"}),"Not Connected"]})})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-medium",children:"Repository"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Connected GitHub repository"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:[s.repositoryOwner,"/",s.repositoryName]}),e.jsx("a",{href:`https://github.com/${s.repositoryOwner}/${s.repositoryName}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:text-primary/80 transition-colors",children:e.jsx(S,{className:"w-3 h-3"})})]})]})]}),g&&i&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-medium",children:"GitHub App Status"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Installation and permissions status"})]}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:i.isInstalled&&i.hasRequiredPermissions?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-green-600 font-medium",children:"Properly configured"})]}):i.isInstalled?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-amber-600 font-medium",children:"Missing permissions"})]}):e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-red-600 font-medium",children:"Not installed"})]})})]})]})]}),e.jsxs("div",{className:"space-y-4 border border-border rounded-md p-4 bg-sidebar",children:[e.jsx(ye,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(W),className:"space-y-4",children:[e.jsx(T,{control:r.control,name:"repositoryOwner",render:({field:l})=>e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(B,{className:"text-sm font-medium",children:"Repository Owner"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"GitHub username or organization"})]}),e.jsx(U,{children:e.jsx(E,{className:"w-64",placeholder:"e.g., octocat",...l,disabled:o||m})})]}),e.jsx(K,{})]})}),e.jsx(f,{}),e.jsx(T,{control:r.control,name:"repositoryName",render:({field:l})=>e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(B,{className:"text-sm font-medium",children:"Repository Name"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The repository name"})]}),e.jsx(U,{children:e.jsx(E,{className:"w-64",placeholder:"e.g., my-project",...l,disabled:o||m})})]}),e.jsx(K,{})]})}),e.jsx(f,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-medium",children:"Actions"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Manage your repository connection"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:()=>G(!0),className:"gap-2",children:[e.jsx(M,{className:"size-3"}),"Browse"]}),e.jsxs(p,{type:"button",variant:"outline",size:"sm",onClick:()=>x(r.getValues()),disabled:R||!r.formState.isValid,className:"gap-2",children:[e.jsx(Z,{className:z("size-3",R&&"animate-spin")}),"Verify"]}),e.jsxs(p,{type:"submit",size:"sm",disabled:o||m||!r.formState.isValid||(i?!i.isInstalled||!i.hasRequiredPermissions:!1),className:"gap-2",children:[e.jsx(Ce,{className:"size-3"}),g?"Update":"Connect"]}),g&&e.jsxs(p,{type:"button",variant:"destructive",size:"sm",onClick:Y,disabled:o||m,className:"gap-2",children:[e.jsx(_e,{className:"size-3"}),"Disconnect"]})]})]})]})}),i&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:z("flex items-start gap-3 p-3 border rounded-md text-sm",i.isInstalled&&i.hasRequiredPermissions?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":i.isInstalled||i.repositoryExists?"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"),children:[i.isInstalled&&i.hasRequiredPermissions?e.jsx(q,{className:"w-4 h-4 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}):i.isInstalled||i.repositoryExists?e.jsx(Q,{className:"w-4 h-4 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}):e.jsx(A,{className:"w-4 h-4 text-red-600 dark:text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:i.message}),i.isInstalled&&!i.hasRequiredPermissions&&i.missingPermissions&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-xs mb-2",children:["Missing permissions:"," ",e.jsx("strong",{children:i.missingPermissions.join(", ")})]}),e.jsx("div",{className:"flex gap-2",children:i.settingsUrl&&e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>window.open(i.settingsUrl,"_blank"),className:"gap-2",children:[e.jsx(S,{className:"w-3 h-3"}),"Update Permissions"]})})]}),!i.isInstalled&&i.repositoryExists&&e.jsx("div",{className:"mt-2",children:i.installationUrl&&e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>window.open(i.installationUrl,"_blank"),className:"gap-2",children:[e.jsx(S,{className:"w-3 h-3"}),"Install GitHub App"]})})]})]})})]})]}),g&&e.jsxs("div",{className:"space-y-4 border border-border rounded-md p-4 bg-sidebar",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx("p",{className:"text-sm font-medium",children:"Import GitHub Issues"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Import existing issues from your GitHub repository as tasks"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(p,{onClick:ee,disabled:w||!D,className:"gap-2",size:"sm",variant:"outline",children:[w?e.jsx(Z,{className:"size-3 animate-spin"}):e.jsx(ke,{className:"size-3"}),w?"Importing...":"Import Issues"]})})]}),!D&&e.jsxs(e.Fragment,{children:[e.jsx(f,{}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Complete the repository configuration above to enable importing"})]})]}),e.jsx(qe,{open:$,onOpenChange:G,onSelectRepository:J,selectedRepository:d&&k?`${d}/${k}`:void 0})]})}function Rs(){const t=I.c(5),{projectId:s}=te.useParams();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=e.jsx(re,{title:"Project Integrations"}),t[0]=a):a=t[0];let n;t[1]===Symbol.for("react.memo_cache_sentinel")?(n=e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Project Integrations"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect your project with external tools and services to streamline your workflow."})]}),t[1]=n):n=t[1];let o;t[2]===Symbol.for("react.memo_cache_sentinel")?(o=e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-md font-medium",children:"GitHub Integration"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Synchronize tasks with GitHub issues and enable two-way sync."})]}),t[2]=o):o=t[2];let c;return t[3]!==s?(c=e.jsxs(e.Fragment,{children:[a,e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[n,e.jsxs("div",{className:"space-y-6",children:[o,e.jsx("div",{className:"space-y-4",children:e.jsx(Ze,{projectId:s})})]})]})]}),t[3]=s,t[4]=c):c=t[4],c}export{Rs as component};
