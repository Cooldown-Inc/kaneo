import{a as ps,u as hs,r as K,j as s,d as Ve,v as xs,t as Je,c as fs,B as gs,n as ks}from"./index-D6_JMR29.js";import{C as ns,p as rs}from"./create-task-modal-BiimqmcX.js";import{u as vs,a as js,C as bs,b as Ts,c as Ns,T as ws,d as Ds,f as is,g as ys,h as Ze,K as Cs,i as zs,M as Ss,k as As,s as Is,l as Ms,A as Ps,D as Ls,t as Fs,e as _s,S as Es,v as Os,m as Us,F as $s}from"./use-get-tasks-D5QZfgCj.js";import{p as Rs}from"./priority-colors-6ek9MFmG.js";import{u as ss}from"./project-Bb0wcCkA.js";import{A as Bs,a as Ks,b as Gs,c as Ws,d as qs,e as Qs,f as Ys,g as Xs}from"./alert-dialog-Df-VbuAQ.js";import{A as ls,b as os,a as cs}from"./avatar-BVGO6hTJ.js";import{u as Hs}from"./use-active-workspace-DO0oIQWU.js";import{u as ds,l as as}from"./label-colors-8UuYiFqu.js";import{d as Vs,g as $e,b as Js,c as Zs}from"./due-date-status-C9IOja7g.js";import{g as es,f as et}from"./priority-Bhdual4o.js";import{C as ms,a as st}from"./project-icons-C5t--tF0.js";import{C as tt}from"./clock-XCZt0uXC.js";import{C as at}from"./chevron-right-Dbn00CNb.js";import{P as us}from"./create-project-modal-Cne2zI5Z.js";import{P as nt}from"./project-layout-Dfroj-0i.js";import{P as rt}from"./page-title-D2qfPOLM.js";import{B as E}from"./button-EC3LtV52.js";import{a as qe,b as Qe,D as Ye,c as it,d as lt,e as ot,f as ct,g as dt,h as Xe}from"./layout-CW2eFLdS.js";import{u as mt}from"./use-get-labels-by-workspace-C9xMoTEH.js";import{X as He}from"./x-BiMo91W-.js";import{U as ut}from"./user-G-k1XeFN.js";import{A as pt}from"./arrow-right-B2Q9mrNw.js";import"./tooltip-CdvJmOJg.js";import"./index-BlCpMXjl.js";import"./index-D2z6sO9D.js";import"./index-Dtyx9z7_.js";import"./index-DlhLTHW_.js";import"./index-Bkpo5cC8.js";import"./index-sjf38YVm.js";import"./index-IN0mQVXW.js";import"./index-DomteP0B.js";import"./index-BnceiTS-.js";import"./index-J_fMdZqQ.js";import"./list-gjk-xblB.js";import"./createLucideIcon-CRcKb1Ol.js";import"./badge-DgtRj8pM.js";import"./index-J3ygd6UU.js";import"./index-BrfIpMvE.js";import"./input-BncAdNhM.js";import"./popover-1qwL5cRb.js";import"./useMutation-B_C6xvhR.js";import"./check-IjCBnfdg.js";import"./search-BHoHnvlf.js";import"./useQuery-BDxn_D7I.js";import"./index-Xyhz7DHc.js";import"./circle-check-CrDXoG6g.js";import"./en-US-DIdCsyf3.js";import"./chevron-down-BSVZ8qIu.js";import"./chevron-up-CaCzMnzW.js";import"./users-DuQM-a9l.js";import"./settings-8jW1THm0.js";import"./building-2-DuX-XVkM.js";import"./index-6HzwgF_f.js";import"./index-BMwPMg65.js";import"./use-create-workspace-DP7ePvTH.js";import"./create-slug-VE8e1keW.js";import"./useLocation-D8sQn3ZG.js";import"./notification-dropdown-CZcG6wot.js";import"./separator-Cv6BfWof.js";import"./sidebar-C6zCFglj.js";import"./use-get-project-BeZMn5W-.js";import"./loader-circle-DwAUW7-I.js";import"./collapsible-BzsgDJ0n.js";import"./use-delete-project-WU8lx2qP.js";import"./use-get-projects-CoJzRJjM.js";import"./index.esm-C6Qxl6lY.js";import"./index-MjJcs9DE.js";import"./index-CdGl6-Bn.js";import"./index-DoArV3ca.js";import"./index-xgW0SxxU.js";function ht({task:e}){const h=ps(),{attributes:O,listeners:x,setNodeRef:i,transform:N,transition:z,isDragging:de}=vs({id:e.id}),{project:f}=ss(),{data:v}=Hs(),{showAssignees:G,showPriority:q,showDueDates:j,showLabels:me,showTaskNumbers:Q}=hs(),[Y,t]=K.useState(!1),{mutateAsync:ue}=js(),{data:U}=ds(v?.id??""),S=K.useMemo(()=>U?.members?.find(l=>l.userId===e.userId),[U,e.userId]),X={transform:bs.Transform.toString(N),transition:z||"transform 200ms cubic-bezier(0.25, 0.46, 0.45, 0.94)",touchAction:"none"},$=l=>{!f||!e||l.defaultPrevented||h({to:"/dashboard/workspace/$workspaceId/project/$projectId/task/$taskId",params:{workspaceId:f.workspaceId,projectId:f.id,taskId:e.id}})},r=l=>{l.key==="Enter"&&$(l)},d=async()=>{try{await ue(e.id),xs.invalidateQueries({queryKey:["tasks",f?.id]})}catch(l){Je.error(l instanceof Error?l.message:"Failed to delete task")}finally{Je.success("Task deleted successfully")}};return s.jsxs("div",{ref:i,style:X,className:Ve("border-b border-zinc-200/50 dark:border-zinc-800/50 transition-all duration-200",de&&"opacity-50"),children:[s.jsxs(Ts,{children:[s.jsx(Ns,{asChild:!0,children:s.jsxs("div",{onClick:$,onKeyDown:r,className:"group relative flex items-center gap-3 px-4 py-1.5 hover:bg-zinc-100/60 dark:hover:bg-zinc-800/20 transition-colors cursor-pointer",...O,...x,children:[q&&s.jsx("div",{className:"flex-shrink-0 first:[&_svg]:h-4 first:[&_svg]:w-4",children:es(e.priority??"")}),Q&&s.jsxs("div",{className:"text-xs font-mono text-zinc-400 dark:text-zinc-500 flex-shrink-0",children:[f?.slug,"-",e.number]}),s.jsx("div",{className:"flex-1 min-w-0 flex items-center gap-2",children:s.jsxs("div",{className:"flex items-center gap-2 justify-between w-full",children:[s.jsx("span",{className:"text-sm text-zinc-900 dark:text-zinc-100 truncate",children:e.title}),me&&s.jsx("div",{className:"flex items-center gap-1",children:s.jsx(ws,{taskId:e.id})})]})}),j&&e.dueDate&&s.jsxs("div",{className:`flex items-center gap-1 text-[10px] px-2 py-1 rounded flex-shrink-0 ${Vs[$e(e.dueDate)]}`,children:[$e(e.dueDate)==="overdue"&&s.jsx(Js,{className:"w-3 h-3"}),$e(e.dueDate)==="due-soon"&&s.jsx(Zs,{className:"w-3 h-3"}),($e(e.dueDate)==="far-future"||$e(e.dueDate)==="no-due-date")&&s.jsx(ms,{className:"w-3 h-3"}),s.jsx("span",{children:et(new Date(e.dueDate),"MMM d")})]}),G&&s.jsx("div",{className:"flex-shrink-0",children:e.userId?s.jsxs(ls,{className:"h-6 w-6",children:[s.jsx(os,{src:S?.user?.image??"",alt:S?.user?.name||""}),s.jsx(cs,{className:"text-xs font-medium border border-border/30",children:S?.user?.name?.charAt(0).toUpperCase()})]}):s.jsx("div",{className:"w-6 h-6 rounded-full bg-muted border border-border flex items-center justify-center",title:"Unassigned",children:s.jsx("span",{className:"text-[10px] font-medium text-muted-foreground",children:"?"})})})]})}),f&&v&&s.jsx(Ds,{task:e,taskCardContext:{projectId:f.id,worskpaceId:v.id},onDeleteClick:()=>t(!0)})]}),s.jsx(Bs,{open:Y,onOpenChange:t,children:s.jsxs(Ks,{children:[s.jsxs(Gs,{children:[s.jsx(Ws,{children:"Delete Task?"}),s.jsx(qs,{children:"This will permanently remove the task and all its data. You can't undo this action."})]}),s.jsxs(Qs,{children:[s.jsx(Ys,{children:"Cancel"}),s.jsx(Xs,{onClick:d,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Task"})]})]})})]})}function xt({project:e}){const{mutate:h}=is(),{setProject:O}=ss(),[x,i]=K.useState(null),[N,z]=K.useState(null),[de,f]=K.useState({planned:!0,archived:!0}),[v,G]=K.useState(!1),[q,j]=K.useState(null),me=ys(Ze(Ss,{activationConstraint:{distance:8}}),Ze(zs,{activationConstraint:{delay:200,tolerance:8}}),Ze(Cs)),Q=r=>{i(r.active.id)},Y=r=>{const{over:d}=r;if(!d||!x){z(null);return}if(d.id==="planned"||d.id==="archived"){z(d.id.toString());return}const l=d.id.toString(),m=e?.plannedTasks||[],g=e?.archivedTasks||[];m.some(w=>w.id===l)?z("planned"):g.some(w=>w.id===l)?z("archived"):z(null)},t=r=>{const{active:d,over:l}=r;if(i(null),z(null),!l||!e)return;const m=d.id.toString(),g=l.id.toString(),w=e.plannedTasks||[],he=e.archivedTasks||[],k=[...w,...he].find(n=>n.id===m);if(!k)return;let D=g;if(g!=="planned"&&g!=="archived")if(w.some(n=>n.id===g))D="planned";else if(he.some(n=>n.id===g))D="archived";else return;const xe=rs(e,n=>{const fe=k.status==="planned"?n.plannedTasks||[]:n.archivedTasks||[],pe=fe.findIndex(b=>b.id===m),y=fe[pe];if(y)if(k.status==="planned"?n.plannedTasks=n.plannedTasks?.filter(b=>b.id!==m)||[]:n.archivedTasks=n.archivedTasks?.filter(b=>b.id!==m)||[],k.status===D){let C=(k.status==="planned"?n.plannedTasks||[]:n.archivedTasks||[]).findIndex(R=>R.id===g);pe<=C&&(C+=1),k.status==="planned"?n.plannedTasks?.splice(C,0,y):n.archivedTasks?.splice(C,0,y),(k.status==="planned"?n.plannedTasks||[]:n.archivedTasks||[]).forEach((R,H)=>{h({...R,position:H+1})})}else y.status=D,D==="planned"?n.plannedTasks=[...n.plannedTasks||[],y]:n.archivedTasks=[...n.archivedTasks||[],y],(D==="planned"?n.plannedTasks||[]:n.archivedTasks||[]).forEach((C,W)=>{h({...C,status:D,position:W+1})})});O(xe)},ue=r=>{f(d=>({...d,[r]:!d[r]}))};function U({sectionId:r,title:d,icon:l,tasks:m,showAddButton:g=!1}){const{setNodeRef:w}=_s({id:r,data:{type:"column",column:{id:r,name:d}}}),he=x&&N===r;return s.jsxs("div",{className:Ve("border-b border-zinc-200 dark:border-zinc-800/50 transition-all duration-200 overflow-auto",he&&"border-l-4 border-l-indigo-500 dark:border-l-indigo-400 bg-indigo-50/30 dark:bg-indigo-950/10"),children:[s.jsxs("div",{className:"flex items-center justify-between py-2 px-4 bg-zinc-100/60 dark:bg-zinc-800/20 border-b border-zinc-200/50 dark:border-zinc-800/30",children:[s.jsxs("button",{type:"button",onClick:()=>ue(r),className:"flex items-center gap-2 text-sm font-medium text-zinc-800 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-zinc-100 transition-colors",children:[s.jsx(at,{className:Ve("w-3 h-3 transition-transform",de[r]&&"rotate-90")}),s.jsxs("div",{className:"flex items-center gap-2 h-4",children:[s.jsx(l,{className:"w-4 h-4 flex-shrink-0 text-zinc-500 dark:text-zinc-400"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"mt-1 mr-1",children:d}),s.jsx("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-0.5",children:m.length})]})]})]}),s.jsx("div",{className:"flex items-center gap-1",children:g&&s.jsx("button",{type:"button",onClick:()=>{G(!0),j("planned")},className:"p-1 hover:bg-zinc-200/70 dark:hover:bg-zinc-700 rounded text-zinc-600 hover:text-zinc-800 dark:text-zinc-500 dark:hover:text-zinc-300 transition-colors",title:"Add task",children:s.jsx(us,{className:"w-3 h-3"})})})]}),de[r]&&s.jsxs("div",{ref:w,className:"bg-white dark:bg-transparent",children:[s.jsx(Es,{items:m,strategy:Os,children:m.map(k=>s.jsx(ht,{task:k},k.id))}),m.length===0&&s.jsxs("div",{className:"py-6 px-4 text-center text-xs text-zinc-400 dark:text-zinc-500",children:["No ",d.toLowerCase()," tasks"]})]})]})}if(!e)return null;const S=e.plannedTasks||[],X=e.archivedTasks||[],$=e.plannedTasks.find(r=>r.id===x)||e.archivedTasks.find(r=>r.id===x);return s.jsxs(As,{sensors:me,collisionDetection:Ms,onDragStart:Q,onDragOver:Y,onDragEnd:t,modifiers:[Is],children:[s.jsx("div",{className:"w-full h-full overflow-auto bg-zinc-50/30 dark:bg-transparent",children:s.jsxs("div",{className:"divide-y divide-zinc-200 dark:divide-zinc-800/50",children:[s.jsx(U,{sectionId:"planned",title:"Planned",icon:tt,tasks:S,showAddButton:!0}),s.jsx(U,{sectionId:"archived",title:"Archived",icon:Ps,tasks:X})]})}),s.jsx(Ls,{children:$&&s.jsx("div",{className:"bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-2 max-w-[200px] cursor-grabbing",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(st,{className:Ve("w-3 h-3",Rs[$.priority])})}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsxs("span",{className:"text-[10px] font-mono text-zinc-400 dark:text-zinc-500",children:[e?.slug,"-",$.number]}),s.jsx("span",{className:"text-xs text-zinc-900 dark:text-zinc-100 truncate",children:$.title})]})})]})})}),s.jsx(ns,{open:v,onClose:()=>G(!1),status:Fs(q??"planned")})]})}function $a(){const e=fs.c(178),{projectId:h,workspaceId:O}=gs.useParams(),{data:x}=Us(h),{project:i,setProject:N}=ss(),[z,de]=K.useState(!1),{mutate:f}=is(),{data:v}=ds(O),{data:G}=mt(O);let q;e[0]!==G?(q=G===void 0?[]:G,e[0]=G,e[1]=q):q=e[1];const j=q,me=ks();let Q;e[2]===Symbol.for("react.memo_cache_sentinel")?(Q=[],e[2]=Q):Q=e[2];let Y;e[3]===Symbol.for("react.memo_cache_sentinel")?(Y={priority:null,assignee:null,dueDate:null,labels:Q},e[3]=Y):Y=e[3];const[t,ue]=K.useState(Y);let U;e[4]===Symbol.for("react.memo_cache_sentinel")?(U=(u,o)=>{ue(p=>({...p,[u]:o}))},e[4]=U):U=e[4];const S=U;let X;e[5]===Symbol.for("react.memo_cache_sentinel")?(X=u=>{ue(o=>({...o,labels:o.labels.includes(u)?o.labels.filter(p=>p!==u):[...o.labels,u]}))},e[5]=X):X=e[5];const $=X;let r;e[6]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{ue({priority:null,assignee:null,dueDate:null,labels:[]})},e[6]=r):r=e[6];const d=r;let l;e[7]!==t?(l=Object.values(t).some(Tt),e[7]=t,e[8]=l):l=e[8];const m=l;let g,w;e[9]!==x||e[10]!==N?(g=()=>{x&&N(x)},w=[x,N],e[9]=x,e[10]=N,e[11]=g,e[12]=w):(g=e[11],w=e[12]),K.useEffect(g,w);const he=bt;let k;e[13]!==v?.members?(k=u=>v?.members?.find(p=>p.userId===u)?.user?.name||"Unknown",e[13]=v?.members,e[14]=k):k=e[14];const D=k;let xe;e[15]!==me?(xe=u=>{const o=["labels",u];return me.getQueryData(o)||[]},e[15]=me,e[16]=xe):xe=e[16];const n=xe;let fe;s:{if(!i){fe=null;break s}let u;e[17]!==t.assignee||e[18]!==t.dueDate||e[19]!==t.labels||e[20]!==t.priority||e[21]!==n?(u=Ue=>Ue.filter(L=>{if(t.priority&&L.priority!==t.priority||t.assignee&&L.userId!==t.assignee)return!1;if(t.dueDate&&L.dueDate){const T=new Date,F=new Date(L.dueDate);e:switch(t.dueDate){case"Due this week":{const _=new Date(T.getFullYear(),T.getMonth(),T.getDate()-T.getDay()),A=new Date(_.getTime()+5184e5);if(F<_||F>A)return!1;break e}case"Due next week":{const _=new Date(T.getFullYear(),T.getMonth(),T.getDate()-T.getDay()+7),A=new Date(_.getTime()+5184e5);if(F<_||F>A)return!1;break e}case"No due date":return!1}}if(t.dueDate==="No due date"&&L.dueDate)return!1;if(t.labels.length>0){const F=n(L.id).map(jt);if(!t.labels.some(A=>F.includes(A)))return!1}return!0}),e[17]=t.assignee,e[18]=t.dueDate,e[19]=t.labels,e[20]=t.priority,e[21]=n,e[22]=u):u=e[22];const o=u;let p;e[23]!==i.plannedTasks?(p=i.plannedTasks||[],e[23]=i.plannedTasks,e[24]=p):p=e[24];let I;e[25]!==o||e[26]!==p?(I=o(p),e[25]=o,e[26]=p,e[27]=I):I=e[27];let M;e[28]!==i.archivedTasks?(M=i.archivedTasks||[],e[28]=i.archivedTasks,e[29]=M):M=e[29];let P;e[30]!==o||e[31]!==M?(P=o(M),e[30]=o,e[31]=M,e[32]=P):P=e[32];let ce;e[33]!==i||e[34]!==I||e[35]!==P?(ce={...i,plannedTasks:I,archivedTasks:P},e[33]=i,e[34]=I,e[35]=P,e[36]=ce):ce=e[36],fe=ce}const pe=fe;let y,b,C,W,R,H,ge,V,ke,ve,J,Z,ee,se,te,je,ae,ne,re,ie,le,be,Te,Ne,we,De,ye,Ce,oe;if(e[37]!==t.assignee||e[38]!==t.dueDate||e[39]!==t.labels||e[40]!==t.priority||e[41]!==D||e[42]!==m||e[43]!==i||e[44]!==h||e[45]!==N||e[46]!==f||e[47]!==v?.members||e[48]!==O||e[49]!==j){const u=j.reduce(vt,[]);let o;e[79]!==t.labels||e[80]!==j?(o=a=>j.filter(c=>c.name===a.name&&c.color===a.color).some(c=>t.labels?.includes(c.id)),e[79]=t.labels,e[80]=j,e[81]=o):o=e[81];const p=o;let I;e[82]!==t.labels||e[83]!==j?(I=a=>{const c=j.filter(B=>B.name===a.name&&B.color===a.color);if(c.some(B=>t.labels?.includes(B.id)))for(const B of c)t.labels?.includes(B.id)&&$(B.id);else for(const B of c)t.labels?.includes(B.id)||$(B.id)},e[82]=t.labels,e[83]=j,e[84]=I):I=e[84];const M=I;let P;e[85]!==i||e[86]!==N||e[87]!==f?(P=()=>{if(!i)return;const a=i.plannedTasks||[];if(a.length===0){Je.info("No planned tasks to move");return}if(!confirm(`Move all ${a.length} planned tasks to To Do?`))return;for(const ts of a)f({...ts,status:"to-do"});const c=rs(i,ft);N(c),Je.success(`Moved ${a.length} tasks to To Do`)},e[85]=i,e[86]=N,e[87]=f,e[88]=P):P=e[88];const ce=P;R=nt,ye=h,Ce=O;const Ue=`${i?.name}'s backlog`;e[89]!==Ue?(oe=s.jsx(rt,{title:Ue}),e[89]=Ue,e[90]=oe):oe=e[90],De="flex flex-col h-full min-h-0",we="bg-card border-b border-border",Ne="h-10 flex items-center px-4",Te="flex items-center justify-between w-full",je="flex items-center gap-2";let L;e[91]===Symbol.for("react.memo_cache_sentinel")?(L=()=>de(!0),e[91]=L):L=e[91],e[92]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsxs(E,{variant:"ghost",size:"xs",onClick:L,className:"h-6 px-2 text-xs text-zinc-600 dark:text-zinc-400",children:[s.jsx(us,{className:"h-3 w-3 mr-1"}),"Plan"]}),e[92]=ae):ae=e[92];let T;e[93]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(pt,{className:"h-3 w-3 mr-1"}),e[93]=T):T=e[93],e[94]!==ce?(ne=s.jsxs(E,{variant:"ghost",size:"xs",onClick:ce,className:"h-6 px-2 text-xs text-zinc-600 dark:text-zinc-400",title:"Move All Planned to To Do",children:[T,"Move All"]}),e[94]=ce,e[95]=ne):ne=e[95],e[96]!==t.priority?(re=t.priority&&s.jsxs(E,{variant:"secondary",size:"sm",className:"h-6 px-2 text-xs gap-1.5",children:[es(t.priority),s.jsxs("span",{children:["Priority is ",he(t.priority)]}),s.jsx(E,{variant:"ghost",size:"icon",className:"h-3 w-3 p-0 ml-1 hover:bg-destructive hover:text-destructive-foreground",onClick:a=>{a.stopPropagation(),S("priority",null)},children:s.jsx(He,{className:"h-2.5 w-2.5"})})]}),e[96]=t.priority,e[97]=re):re=e[97],e[98]!==t.assignee||e[99]!==D?(ie=t.assignee&&s.jsxs(E,{variant:"secondary",size:"sm",className:"h-6 px-2 text-xs gap-1.5",children:[s.jsx(ut,{className:"h-3 w-3"}),s.jsxs("span",{children:["Assignee is ",D(t.assignee)]}),s.jsx(E,{variant:"ghost",size:"icon",className:"h-3 w-3 p-0 ml-1 hover:bg-destructive hover:text-destructive-foreground",onClick:a=>{a.stopPropagation(),S("assignee",null)},children:s.jsx(He,{className:"h-2.5 w-2.5"})})]}),e[98]=t.assignee,e[99]=D,e[100]=ie):ie=e[100],e[101]!==t.dueDate?(le=t.dueDate&&s.jsxs(E,{variant:"secondary",size:"sm",className:"h-6 px-2 text-xs gap-1.5",children:[s.jsx(ms,{className:"h-3 w-3"}),s.jsxs("span",{children:["Due date is ",t.dueDate]}),s.jsx(E,{variant:"ghost",size:"icon",className:"h-3 w-3 p-0 ml-1 hover:bg-destructive hover:text-destructive-foreground",onClick:a=>{a.stopPropagation(),S("dueDate",null)},children:s.jsx(He,{className:"h-2.5 w-2.5"})})]}),e[101]=t.dueDate,e[102]=le):le=e[102],be=t.labels&&t.labels.length>0&&u.filter(a=>j.filter(c=>c.name===a.name&&c.color===a.color).some(c=>t.labels?.includes(c.id))).map(a=>s.jsxs(E,{variant:"secondary",size:"sm",className:"h-6 px-2 text-xs gap-1.5",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full flex-shrink-0",style:{backgroundColor:as.find(c=>c.value===a.color)?.color||"#94a3b8"}}),s.jsxs("span",{children:["Label is ",a.name]}),s.jsx(E,{variant:"ghost",size:"icon",className:"h-3 w-3 p-0 ml-1 hover:bg-destructive hover:text-destructive-foreground",onClick:c=>{c.stopPropagation(),M(a)},children:s.jsx(He,{className:"h-2.5 w-2.5"})})]},`${a.name}-${a.color}`)),W=it,e[103]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsx(lt,{asChild:!0,children:s.jsxs(E,{variant:"ghost",size:"sm",className:"h-6 px-2 text-xs text-muted-foreground",children:[s.jsx($s,{className:"h-3 w-3 mr-1"}),"Filter"]})}),e[103]=te):te=e[103],C=ot,ke="w-46",ve="start",e[104]!==m?(J=m&&s.jsxs(s.Fragment,{children:[s.jsx(ct,{onClick:d,children:s.jsx("span",{children:"Clear all filters"})}),s.jsx(dt,{})]}),e[104]=m,e[105]=J):J=e[105];let F;e[106]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx(Xe,{className:"gap-2",children:s.jsx("span",{children:"Priority"})}),e[106]=F):F=e[106],e[107]!==t.priority?(Z=s.jsxs(qe,{children:[F,s.jsx(Qe,{className:"w-48",children:["urgent","high","medium","low"].map(a=>s.jsxs(Ye,{checked:t.priority===a,onCheckedChange:()=>S("priority",a),className:"[&_svg]:text-muted-foreground",children:[es(a),s.jsx("span",{className:"capitalize",children:a})]},a))})]}),e[107]=t.priority,e[108]=Z):Z=e[108];let _;e[109]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(Xe,{className:"gap-2",children:s.jsx("span",{children:"Assignee"})}),e[109]=_):_=e[109];let A;e[110]!==t.assignee||e[111]!==v?.members?(A=v?.members?.map(a=>s.jsxs(Ye,{checked:t.assignee===a.userId,onCheckedChange:()=>S("assignee",a.userId),children:[s.jsxs(ls,{className:"h-6 w-6",children:[s.jsx(os,{src:a.user?.image??"",alt:a.user?.name||""}),s.jsx(cs,{className:"text-xs font-medium border border-border/30",children:a.user?.name?.charAt(0).toUpperCase()})]}),s.jsx("span",{children:a.user?.name})]},a.userId)),e[110]=t.assignee,e[111]=v?.members,e[112]=A):A=e[112],e[113]!==A?(ee=s.jsxs(qe,{children:[_,s.jsx(Qe,{className:"w-48",children:A})]}),e[113]=A,e[114]=ee):ee=e[114];let Ke;e[115]===Symbol.for("react.memo_cache_sentinel")?(Ke=s.jsx(Xe,{className:"gap-2",children:s.jsx("span",{children:"Due Date"})}),e[115]=Ke):Ke=e[115];let Ge;e[116]===Symbol.for("react.memo_cache_sentinel")?(Ge=["Due this week","Due next week","No due date"],e[116]=Ge):Ge=e[116],e[117]!==t.dueDate?(se=s.jsxs(qe,{children:[Ke,s.jsx(Qe,{className:"w-48",children:Ge.map(a=>s.jsx(Ye,{checked:t.dueDate===a,onCheckedChange:()=>S("dueDate",a),children:s.jsx("span",{children:a})},a))})]}),e[117]=t.dueDate,e[118]=se):se=e[118],b=qe,e[119]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(Xe,{className:"gap-2",children:s.jsx("span",{children:"Labels"})}),e[119]=V):V=e[119],y=Qe,H="w-48";let We;e[120]!==p||e[121]!==M?(We=a=>s.jsxs(Ye,{checked:p(a),onCheckedChange:()=>M(a),children:[s.jsx("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:as.find(c=>c.value===a.color)?.color||"#94a3b8"}}),s.jsx("span",{children:a.name})]},a.id),e[120]=p,e[121]=M,e[122]=We):We=e[122],ge=u.map(We),e[37]=t.assignee,e[38]=t.dueDate,e[39]=t.labels,e[40]=t.priority,e[41]=D,e[42]=m,e[43]=i,e[44]=h,e[45]=N,e[46]=f,e[47]=v?.members,e[48]=O,e[49]=j,e[50]=y,e[51]=b,e[52]=C,e[53]=W,e[54]=R,e[55]=H,e[56]=ge,e[57]=V,e[58]=ke,e[59]=ve,e[60]=J,e[61]=Z,e[62]=ee,e[63]=se,e[64]=te,e[65]=je,e[66]=ae,e[67]=ne,e[68]=re,e[69]=ie,e[70]=le,e[71]=be,e[72]=Te,e[73]=Ne,e[74]=we,e[75]=De,e[76]=ye,e[77]=Ce,e[78]=oe}else y=e[50],b=e[51],C=e[52],W=e[53],R=e[54],H=e[55],ge=e[56],V=e[57],ke=e[58],ve=e[59],J=e[60],Z=e[61],ee=e[62],se=e[63],te=e[64],je=e[65],ae=e[66],ne=e[67],re=e[68],ie=e[69],le=e[70],be=e[71],Te=e[72],Ne=e[73],we=e[74],De=e[75],ye=e[76],Ce=e[77],oe=e[78];let ze;e[123]!==y||e[124]!==H||e[125]!==ge?(ze=s.jsx(y,{className:H,children:ge}),e[123]=y,e[124]=H,e[125]=ge,e[126]=ze):ze=e[126];let Se;e[127]!==b||e[128]!==V||e[129]!==ze?(Se=s.jsxs(b,{children:[V,ze]}),e[127]=b,e[128]=V,e[129]=ze,e[130]=Se):Se=e[130];let Ae;e[131]!==C||e[132]!==ke||e[133]!==ve||e[134]!==J||e[135]!==Z||e[136]!==ee||e[137]!==se||e[138]!==Se?(Ae=s.jsxs(C,{className:ke,align:ve,children:[J,Z,ee,se,Se]}),e[131]=C,e[132]=ke,e[133]=ve,e[134]=J,e[135]=Z,e[136]=ee,e[137]=se,e[138]=Se,e[139]=Ae):Ae=e[139];let Ie;e[140]!==W||e[141]!==te||e[142]!==Ae?(Ie=s.jsxs(W,{children:[te,Ae]}),e[140]=W,e[141]=te,e[142]=Ae,e[143]=Ie):Ie=e[143];let Me;e[144]!==je||e[145]!==ae||e[146]!==ne||e[147]!==re||e[148]!==ie||e[149]!==le||e[150]!==be||e[151]!==Ie?(Me=s.jsxs("div",{className:je,children:[ae,ne,re,ie,le,be,Ie]}),e[144]=je,e[145]=ae,e[146]=ne,e[147]=re,e[148]=ie,e[149]=le,e[150]=be,e[151]=Ie,e[152]=Me):Me=e[152];let Pe;e[153]!==Te||e[154]!==Me?(Pe=s.jsx("div",{className:Te,children:Me}),e[153]=Te,e[154]=Me,e[155]=Pe):Pe=e[155];let Le;e[156]!==Ne||e[157]!==Pe?(Le=s.jsx("div",{className:Ne,children:Pe}),e[156]=Ne,e[157]=Pe,e[158]=Le):Le=e[158];let Fe;e[159]!==we||e[160]!==Le?(Fe=s.jsx("div",{className:we,children:Le}),e[159]=we,e[160]=Le,e[161]=Fe):Fe=e[161];let _e;e[162]!==pe?(_e=s.jsx("div",{className:"flex-1 overflow-hidden bg-card h-full",children:pe?s.jsx(xt,{project:pe}):s.jsx("div",{className:"flex h-full items-center justify-center",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-zinc-200 dark:bg-zinc-800 rounded-lg animate-pulse mx-auto"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"w-48 h-4 bg-zinc-200 dark:bg-zinc-800 rounded animate-pulse mx-auto"}),s.jsx("div",{className:"w-64 h-3 bg-zinc-200 dark:bg-zinc-800 rounded animate-pulse mx-auto"})]})]})})}),e[162]=pe,e[163]=_e):_e=e[163];let Re;e[164]===Symbol.for("react.memo_cache_sentinel")?(Re=()=>de(!1),e[164]=Re):Re=e[164];let Ee;e[165]!==z?(Ee=s.jsx(ns,{open:z,onClose:Re,status:"planned"}),e[165]=z,e[166]=Ee):Ee=e[166];let Oe;e[167]!==De||e[168]!==Fe||e[169]!==_e||e[170]!==Ee?(Oe=s.jsxs("div",{className:De,children:[Fe,_e,Ee]}),e[167]=De,e[168]=Fe,e[169]=_e,e[170]=Ee,e[171]=Oe):Oe=e[171];let Be;return e[172]!==R||e[173]!==ye||e[174]!==Ce||e[175]!==oe||e[176]!==Oe?(Be=s.jsxs(R,{projectId:ye,workspaceId:Ce,children:[oe,Oe]}),e[172]=R,e[173]=ye,e[174]=Ce,e[175]=oe,e[176]=Oe,e[177]=Be):Be=e[177],Be}function ft(e){const h=e.columns?.find(kt);h&&e.plannedTasks&&(h.tasks.push(...e.plannedTasks.map(gt)),e.plannedTasks=[])}function gt(e){return{...e,status:"to-do"}}function kt(e){return e.id==="to-do"}function vt(e,h){return e.find(x=>x.name===h.name&&x.color===h.color)||e.push(h),e}function jt(e){return e.id}function bt(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Tt(e){return Array.isArray(e)?e.length>0:e!==null}export{$a as component};
