import{c as ee,f as rs,r as g,j as t,d as F,e as Le,u as Xe,o as At,n as Ye,t as U,D as K,F as ns}from"./index-D6_JMR29.js";import{u as Je}from"./use-active-workspace-DO0oIQWU.js";import{u as Ze}from"./useQuery-BDxn_D7I.js";import{A as Se,b as Te,a as _e}from"./avatar-BVGO6hTJ.js";import{c as os,a as fe,u as ls,P as is}from"./index-BlCpMXjl.js";import{u as cs}from"./index-Dtyx9z7_.js";import{c as zt,C as ds,R as ms,A as us,a as ps}from"./index-IN0mQVXW.js";import{P as fs}from"./index-BnceiTS-.js";import{D as xs}from"./index-DlhLTHW_.js";import{f as et,G as tt,d as st,n as at,T as rt,H as nt,b as ot,c as lt,L as it,B as ct,I as dt,U as mt,S as ut,$ as pt,O as ft,o as xt,D as ht,C as hs,g as gs,u as js}from"./use-get-labels-by-workspace-C9xMoTEH.js";import{B as L}from"./button-EC3LtV52.js";import{a as ue,b as R,T as M,c as B,K as $,s as kt}from"./tooltip-CdvJmOJg.js";import{u as gt}from"./useMutation-B_C6xvhR.js";import{c as jt}from"./createLucideIcon-CRcKb1Ol.js";import{L as bt}from"./list-gjk-xblB.js";import{b as yt,M as bs,C as It}from"./project-icons-C5t--tF0.js";import{C as je}from"./check-IjCBnfdg.js";import{X as Dt}from"./x-BiMo91W-.js";import{i as Rt,L as qe}from"./layout-CW2eFLdS.js";import{C as ys,g as Mt,f as vs}from"./priority-Bhdual4o.js";import{B as Ge,h as Nt,i as Ct,j as ws,k as ks,P as Bt}from"./create-project-modal-Cne2zI5Z.js";import{S as Ns}from"./separator-Cv6BfWof.js";import{a as Cs}from"./sidebar-C6zCFglj.js";import{u as Ft}from"./use-get-project-BeZMn5W-.js";import{P as Ss}from"./page-title-D2qfPOLM.js";import{P as Ee,a as Pe,b as Ae}from"./popover-1qwL5cRb.js";import{c as Ts,u as $t,e as _s,f as Ls,h as Ht,a as Es,b as Ps,g as Ot,d as As,l as zs}from"./label-colors-8UuYiFqu.js";import{u as Ut}from"./index.esm-C6Qxl6lY.js";import{F as Kt,a as qt,d as Gt}from"./form-Bsr6zOGs.js";import{I as Qt}from"./input-BncAdNhM.js";import{S as Is,G as Ds}from"./search-BHoHnvlf.js";import{B as Rs}from"./badge-DgtRj8pM.js";import{g as ge,b as Ms,d as Qe,c as Bs}from"./due-date-status-C9IOja7g.js";import{C as Fs}from"./copy-BS3Xcz8C.js";import"./index-Bkpo5cC8.js";import"./index-D2z6sO9D.js";import"./index-Xyhz7DHc.js";import"./index-DomteP0B.js";import"./index-BrfIpMvE.js";import"./index-MjJcs9DE.js";import"./index-CdGl6-Bn.js";import"./index-6HzwgF_f.js";import"./index-sjf38YVm.js";import"./index-DoArV3ca.js";import"./index-J_fMdZqQ.js";import"./index-xgW0SxxU.js";import"./index-BMwPMg65.js";import"./en-US-DIdCsyf3.js";import"./chevron-right-Dbn00CNb.js";import"./chevron-down-BSVZ8qIu.js";import"./users-DuQM-a9l.js";import"./user-G-k1XeFN.js";import"./settings-8jW1THm0.js";import"./building-2-DuX-XVkM.js";import"./loader-circle-DwAUW7-I.js";import"./collapsible-BzsgDJ0n.js";import"./use-delete-project-WU8lx2qP.js";import"./use-get-projects-CoJzRJjM.js";import"./alert-dialog-Df-VbuAQ.js";import"./index-J3ygd6UU.js";import"./project-Bb0wcCkA.js";import"./chevron-up-CaCzMnzW.js";import"./use-create-workspace-DP7ePvTH.js";import"./create-slug-VE8e1keW.js";import"./circle-check-CrDXoG6g.js";import"./label-EHONJWOK.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],St=jt("history",$s);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Os=jt("pencil",Hs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],Ks=jt("send-horizontal",Us);function qs(s){const e=ee.c(15),{workspaceId:a,limit:o,offset:r,sortBy:u,sortDirection:h,filterField:f,filterOperator:m,filterValue:n}=s;let d;e[0]!==f||e[1]!==m||e[2]!==n||e[3]!==o||e[4]!==r||e[5]!==u||e[6]!==h||e[7]!==a?(d=["workspace-users",a,o,r,u,h,f,m,n],e[0]=f,e[1]=m,e[2]=n,e[3]=o,e[4]=r,e[5]=u,e[6]=h,e[7]=a,e[8]=d):d=e[8];const l=!!a;let c;e[9]!==a?(c=async()=>{const{data:p,error:i}=await rs.organization.listMembers({query:{organizationId:a}});if(i)throw new Error(i.message||"Failed to get workspace users");return p.members},e[9]=a,e[10]=c):c=e[10];let x;return e[11]!==d||e[12]!==l||e[13]!==c?(x={queryKey:d,enabled:l,queryFn:c},e[11]=d,e[12]=l,e[13]=c,e[14]=x):x=e[14],Ze(x)}var We,He="HoverCard",[Wt]=os(He,[zt]),Oe=zt(),[Gs,vt]=Wt(He),Vt=s=>{const{__scopeHoverCard:e,children:a,open:o,defaultOpen:r,onOpenChange:u,openDelay:h=700,closeDelay:f=300}=s,m=Oe(e),n=g.useRef(0),d=g.useRef(0),l=g.useRef(!1),c=g.useRef(!1),[x,p]=ls({prop:o,defaultProp:r??!1,onChange:u,caller:He}),i=g.useCallback(()=>{clearTimeout(d.current),n.current=window.setTimeout(()=>p(!0),h)},[h,p]),E=g.useCallback(()=>{clearTimeout(n.current),!l.current&&!c.current&&(d.current=window.setTimeout(()=>p(!1),f))},[f,p]),k=g.useCallback(()=>p(!1),[p]);return g.useEffect(()=>()=>{clearTimeout(n.current),clearTimeout(d.current)},[]),t.jsx(Gs,{scope:e,open:x,onOpenChange:p,onOpen:i,onClose:E,onDismiss:k,hasSelectionRef:l,isPointerDownOnContentRef:c,children:t.jsx(ms,{...m,children:a})})};Vt.displayName=He;var Xt="HoverCardTrigger",Yt=g.forwardRef((s,e)=>{const{__scopeHoverCard:a,...o}=s,r=vt(Xt,a),u=Oe(a);return t.jsx(us,{asChild:!0,...u,children:t.jsx(is.a,{"data-state":r.open?"open":"closed",...o,ref:e,onPointerEnter:fe(s.onPointerEnter,$e(r.onOpen)),onPointerLeave:fe(s.onPointerLeave,$e(r.onClose)),onFocus:fe(s.onFocus,r.onOpen),onBlur:fe(s.onBlur,r.onClose),onTouchStart:fe(s.onTouchStart,h=>h.preventDefault())})})});Yt.displayName=Xt;var Qs="HoverCardPortal",[Hr,Ws]=Wt(Qs,{forceMount:void 0}),Fe="HoverCardContent",Jt=g.forwardRef((s,e)=>{const a=Ws(Fe,s.__scopeHoverCard),{forceMount:o=a.forceMount,...r}=s,u=vt(Fe,s.__scopeHoverCard);return t.jsx(fs,{present:o||u.open,children:t.jsx(Vs,{"data-state":u.open?"open":"closed",...r,onPointerEnter:fe(s.onPointerEnter,$e(u.onOpen)),onPointerLeave:fe(s.onPointerLeave,$e(u.onClose)),ref:e})})});Jt.displayName=Fe;var Vs=g.forwardRef((s,e)=>{const{__scopeHoverCard:a,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:u,onInteractOutside:h,...f}=s,m=vt(Fe,a),n=Oe(a),d=g.useRef(null),l=cs(e,d),[c,x]=g.useState(!1);return g.useEffect(()=>{if(c){const p=document.body;return We=p.style.userSelect||p.style.webkitUserSelect,p.style.userSelect="none",p.style.webkitUserSelect="none",()=>{p.style.userSelect=We,p.style.webkitUserSelect=We}}},[c]),g.useEffect(()=>{if(d.current){const p=()=>{x(!1),m.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(m.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",p),()=>{document.removeEventListener("pointerup",p),m.hasSelectionRef.current=!1,m.isPointerDownOnContentRef.current=!1}}},[m.isPointerDownOnContentRef,m.hasSelectionRef]),g.useEffect(()=>{d.current&&Js(d.current).forEach(i=>i.setAttribute("tabindex","-1"))}),t.jsx(xs,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:h,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:fe(u,p=>{p.preventDefault()}),onDismiss:m.onDismiss,children:t.jsx(ds,{...n,...f,onPointerDown:fe(f.onPointerDown,p=>{p.currentTarget.contains(p.target)&&x(!0),m.hasSelectionRef.current=!1,m.isPointerDownOnContentRef.current=!0}),ref:l,style:{...f.style,userSelect:c?"text":void 0,WebkitUserSelect:c?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),Xs="HoverCardArrow",Ys=g.forwardRef((s,e)=>{const{__scopeHoverCard:a,...o}=s,r=Oe(a);return t.jsx(ps,{...r,...o,ref:e})});Ys.displayName=Xs;function $e(s){return e=>e.pointerType==="touch"?void 0:s()}function Js(s){const e=[],a=document.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;a.nextNode();)e.push(a.currentNode);return e}var Zs=Vt,ea=Yt,Zt=Jt;const es=Zs,ts=ea,wt=g.forwardRef((s,e)=>{const a=ee.c(13);let o,r,u,h;a[0]!==s?({className:o,align:u,sideOffset:h,...r}=s,a[0]=s,a[1]=o,a[2]=r,a[3]=u,a[4]=h):(o=a[1],r=a[2],u=a[3],h=a[4]);const f=u===void 0?"center":u,m=h===void 0?4:h;let n;a[5]!==o?(n=F("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]",o),a[5]=o,a[6]=n):n=a[6];let d;return a[7]!==f||a[8]!==r||a[9]!==e||a[10]!==m||a[11]!==n?(d=t.jsx(Zt,{ref:e,align:f,sideOffset:m,className:n,...r}),a[7]=f,a[8]=r,a[9]=e,a[10]=m,a[11]=n,a[12]=d):d=a[12],d});wt.displayName=Zt.displayName;async function ta({id:s,content:e,userId:a}){const o=await Le.activity.comment.$put({json:{id:s,content:e,userId:a}});if(!o.ok){const u=await o.text();throw new Error(u)}return await o.json()}function sa(){const s=ee.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:ta},s[0]=e):e=s[0],gt(e)}function aa({commentId:s,taskId:e,content:a,user:o,createdAt:r}){const{theme:u}=Xe(),{user:h}=At(),f=g.useRef(!1),[m,n]=g.useState(!1),[d,l]=g.useState(""),{mutateAsync:c,isPending:x}=sa(),p=Ye(),i=et({initialContent:[{type:"paragraph",content:""}]}),E=h?.id===o?.id;g.useEffect(()=>{a?.trim()&&!f.current?(async()=>{try{const y=await i.tryParseMarkdownToBlocks(a.trim()||"");i.replaceBlocks(i.document,y),setTimeout(()=>{i.isEditable=m,f.current=!0},50)}catch(y){console.error("Failed to parse markdown:",y);const w=await i.tryParseMarkdownToBlocks("");i.replaceBlocks(i.document,w),setTimeout(()=>{i.isEditable=m,f.current=!0},50)}})():!a?.trim()&&!f.current&&(i.isEditable=m,f.current=!0)},[a,i,m]),g.useEffect(()=>{m?(i.isEditable=!0,i.focus()):i.isEditable=!1},[m,i]);const k=g.useCallback(async()=>{try{const j=await i.blocksToMarkdownLossy(i.document);l(j.trim())}catch(j){console.error("Failed to convert blocks to markdown:",j)}},[i]),_=()=>{n(!0),l(a)},S=g.useCallback(async()=>{n(!1);try{const j=await i.tryParseMarkdownToBlocks(a.trim()||"");i.replaceBlocks(i.document,j),l("")}catch(j){console.error("Failed to restore content:",j)}},[i,a]),N=g.useCallback(async()=>{if(!d.trim()){U.error("Comment cannot be empty");return}if(!h?.id){U.error("You must be logged in to edit comments");return}try{await c({id:s,userId:h.id,content:d}),n(!1),l(""),await p.invalidateQueries({queryKey:["activities",e]}),U.success("Comment updated")}catch(j){console.error("Failed to update comment:",j),U.error("Failed to update comment")}},[d,c,s,h?.id,p,e]);return g.useEffect(()=>{if(!m)return;const j=w=>{(w.metaKey||w.ctrlKey)&&w.key==="Enter"?(w.preventDefault(),N()):w.key==="Escape"&&(w.preventDefault(),S())},y=i.domElement;return y?.addEventListener("keydown",j),()=>{y?.removeEventListener("keydown",j)}},[i,m,N,S]),t.jsxs("div",{className:"w-full group",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsxs(es,{children:[t.jsx(ts,{asChild:!0,children:t.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsxs(Se,{className:"h-6 w-6",children:[t.jsx(Te,{src:o?.image??"",alt:o?.name||""}),t.jsx(_e,{className:"text-xs font-medium bg-muted",children:o?.name?.charAt(0).toUpperCase()})]}),t.jsx("span",{className:"text-sm font-medium text-foreground hover:text-primary transition-colors",children:o?.name})]})}),t.jsx(wt,{className:"w-52 p-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(Se,{className:"h-8 w-8",children:[t.jsx(Te,{src:o?.image??"",alt:o?.name||""}),t.jsx(_e,{className:"text-xs font-medium bg-muted",children:o?.name?.charAt(0).toUpperCase()})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-foreground leading-none",children:o?.name}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o?.email})]})]})})]}),t.jsx("span",{className:"text-xs text-muted-foreground/60",children:Rt(r,{addSuffix:!0})}),E&&!m&&t.jsx(ue,{children:t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"sm",onClick:_,className:"h-6 w-6 p-0 ml-auto opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(Os,{className:"size-3"})})}),t.jsx(B,{children:t.jsx("p",{className:"text-xs",children:"Edit comment"})})]})})]}),t.jsxs("div",{className:"group border border-border rounded-lg bg-card/50 backdrop-blur-sm relative",children:[t.jsx("div",{className:F("blocknote-transparent p-4",!m&&"[&_.bn-editor]:!cursor-default [&_.ProseMirror]:!outline-none [&_.ProseMirror]:!min-h-0"),children:t.jsxs(tt,{editor:i,className:F("[&>div:first-of-type]:!bg-transparent",m?"[&>div:first-of-type]:!pl-3 [&>div:first-of-type]:!pr-3 min-h-[42px] max-h-[300px] overflow-y-auto":"[&>div:first-of-type]:!pl-0 [&_.bn-block-content]:!cursor-default [&>div:first-of-type]:!min-h-0"),formattingToolbar:m?void 0:!1,linkToolbar:m?void 0:!1,filePanel:!1,sideMenu:!1,slashMenu:!1,tableHandles:!1,theme:u,onChange:m?k:void 0,editable:m,children:[m&&t.jsx(st,{formattingToolbar:()=>t.jsx(ue,{children:t.jsxs("div",{className:"bg-popover flex items-center gap-0.5 px-1.5 py-1 rounded-md border border-border shadow-lg",children:[t.jsx("div",{className:"[&_button]:h-6 [&_button]:px-2 [&_button]:text-xs [&_svg]:size-3",children:t.jsx(at,{items:[{name:"Paragraph",type:"paragraph",icon:rt,props:{},isSelected:j=>j.type==="paragraph"},{name:"Heading 1",type:"heading",icon:nt,props:{level:1},isSelected:j=>j.type==="heading"&&j.props.level===1},{name:"Heading 2",type:"heading",icon:ot,props:{level:2},isSelected:j=>j.type==="heading"&&j.props.level===2},{name:"Heading 3",type:"heading",icon:lt,props:{level:3},isSelected:j=>j.type==="heading"&&j.props.level===3},{name:"Bullet List",type:"bulletListItem",icon:bt,props:{},isSelected:j=>j.type==="bulletListItem"},{name:"Numbered List",type:"numberedListItem",icon:it,props:{},isSelected:j=>j.type==="numberedListItem"}]},"blockTypeSelect")}),t.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({bold:!0}),className:F("h-6 w-6 p-0",i.getActiveStyles().bold&&"bg-accent text-accent-foreground"),children:t.jsx(ct,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"B"],description:"Bold"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({italic:!0}),className:F("h-6 w-6 p-0",i.getActiveStyles().italic&&"bg-accent text-accent-foreground"),children:t.jsx(dt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"I"],description:"Italic"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({underline:!0}),className:F("h-6 w-6 p-0",i.getActiveStyles().underline&&"bg-accent text-accent-foreground"),children:t.jsx(mt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"U"],description:"Underline"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({code:!0}),className:F("h-6 w-6 p-0",i.getActiveStyles().code&&"bg-accent text-accent-foreground"),children:t.jsx(yt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"E"],description:"Code"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>i.toggleStyles({strike:!0}),className:F("h-6 w-6 p-0",i.getActiveStyles().strike&&"bg-accent text-accent-foreground"),children:t.jsx(ut,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"Shift","X"],description:"Strikethrough"})})]}),t.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),t.jsx(pt,{},"createLinkButton")]})})}),t.jsx(ft,{triggerCharacter:"/",getItems:async j=>xt(ht(i).filter(y=>y.group!=="Media"),j)})]})}),m&&t.jsxs("div",{className:"flex items-center gap-1 px-4 pb-3",children:[t.jsx(ue,{children:t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsxs(L,{variant:"ghost",size:"sm",onClick:N,disabled:x||!d.trim(),className:"h-7 px-3 hover:bg-accent",children:[t.jsx(je,{className:"size-3 mr-1"}),"Save"]})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"Enter"],description:"Save changes"})})]})}),t.jsx(ue,{children:t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsxs(L,{variant:"ghost",size:"sm",onClick:S,disabled:x,className:"h-7 px-3 hover:bg-accent",children:[t.jsx(Dt,{className:"size-3 mr-1"}),"Cancel"]})}),t.jsx(B,{children:t.jsx($,{keys:["Esc"],description:"Cancel editing"})})]})})]})]})]})}function Tt(s){const e="w-3 h-3";switch(s){case"status_changed":return t.jsx(St,{className:e});case"priority_changed":return t.jsx(ys,{className:e});case"due_date_changed":return t.jsx(It,{className:e});case"comment":return t.jsx(bs,{className:e});default:return t.jsx(St,{className:e})}}function _t(){return"bg-muted/30 border-border text-muted-foreground"}function ra(s){const e=ee.c(102),{activity:a,isLast:o}=s,r=o===void 0?!1:o,{data:u}=Je(),h=u?.id;let f;e[0]!==h?(f={workspaceId:h},e[0]=h,e[1]=f):f=e[1];const{data:m}=qs(f);let n,d,l,c,x,p,i,E,k,_,S,N,j,y,w,z,C;if(e[2]!==a||e[3]!==r||e[4]!==m){_=Symbol.for("react.early_return_sentinel");e:{if(C=m?.find(q=>q.user?.id===a.userId),console.log(a),a.type==="comment"&&a.content){let q;e[22]!==r?(q=!r&&t.jsx("div",{className:"absolute left-3 top-6 w-px h-full bg-border/40"}),e[22]=r,e[23]=q):q=e[23];let se;e[24]===Symbol.for("react.memo_cache_sentinel")?(se=F("flex items-center justify-center w-6 h-6 rounded-full border",_t()),e[24]=se):se=e[24];let ae;e[25]!==a.type?(ae=Tt(a.type),e[25]=a.type,e[26]=ae):ae=e[26];let J;e[27]!==se||e[28]!==ae?(J=t.jsx("div",{className:"relative flex-shrink-0",children:t.jsx("div",{className:se,children:ae})}),e[27]=se,e[28]=ae,e[29]=J):J=e[29];const ie=C?.user?.id,ce=C?.user?.name,de=C?.user?.email,me=C?.user?.image;let Z;e[30]!==ie||e[31]!==ce||e[32]!==de||e[33]!==me?(Z={id:ie,name:ce,email:de,image:me},e[30]=ie,e[31]=ce,e[32]=de,e[33]=me,e[34]=Z):Z=e[34];let re;e[35]!==a.content||e[36]!==a.createdAt||e[37]!==a.id||e[38]!==a.taskId||e[39]!==Z?(re=t.jsx("div",{className:"flex-1 min-w-0 pt-0.5",children:t.jsx(aa,{commentId:a.id,taskId:a.taskId,content:a.content,user:Z,createdAt:a.createdAt})}),e[35]=a.content,e[36]=a.createdAt,e[37]=a.id,e[38]=a.taskId,e[39]=Z,e[40]=re):re=e[40];let O;e[41]!==q||e[42]!==J||e[43]!==re?(O=t.jsxs("div",{className:"relative flex gap-3 py-2 last:pb-0",children:[q,J,re]}),e[41]=q,e[42]=J,e[43]=re,e[44]=O):O=e[44],_=O;break e}i="relative flex gap-3 py-2 last:pb-0",e[45]!==r?(E=!r&&t.jsx("div",{className:"absolute left-3 top-6 w-px h-full bg-border/40"}),e[45]=r,e[46]=E):E=e[46];let Y;e[47]===Symbol.for("react.memo_cache_sentinel")?(Y=F("flex items-center justify-center w-6 h-6 rounded-full border",_t()),e[47]=Y):Y=e[47];let ne;e[48]!==a.type?(ne=Tt(a.type),e[48]=a.type,e[49]=ne):ne=e[49],e[50]!==Y||e[51]!==ne?(k=t.jsx("div",{className:"relative flex-shrink-0",children:t.jsx("div",{className:Y,children:ne})}),e[50]=Y,e[51]=ne,e[52]=k):k=e[52],p="flex-1 min-w-0 flex items-center gap-2 pt-0.5",c=es;const he=C?.user?.name;e[53]!==he?(x=t.jsx(ts,{asChild:!0,children:t.jsx("span",{className:"text-sm font-medium text-foreground hover:text-primary cursor-pointer transition-colors",children:he})}),e[53]=he,e[54]=x):x=e[54],l=wt,z="w-52 p-3",w="flex items-center gap-3",d=Se,j="h-8 w-8";const oe=C?.user?.image??"",le=C?.user?.name||"";e[55]!==oe||e[56]!==le?(y=t.jsx(Te,{src:oe,alt:le}),e[55]=oe,e[56]=le,e[57]=y):y=e[57],n=_e,S="text-xs font-medium bg-muted",N=C?.user?.name?.charAt(0).toUpperCase()}e[2]=a,e[3]=r,e[4]=m,e[5]=n,e[6]=d,e[7]=l,e[8]=c,e[9]=x,e[10]=p,e[11]=i,e[12]=E,e[13]=k,e[14]=_,e[15]=S,e[16]=N,e[17]=j,e[18]=y,e[19]=w,e[20]=z,e[21]=C}else n=e[5],d=e[6],l=e[7],c=e[8],x=e[9],p=e[10],i=e[11],E=e[12],k=e[13],_=e[14],S=e[15],N=e[16],j=e[17],y=e[18],w=e[19],z=e[20],C=e[21];if(_!==Symbol.for("react.early_return_sentinel"))return _;let P;e[58]!==n||e[59]!==S||e[60]!==N?(P=t.jsx(n,{className:S,children:N}),e[58]=n,e[59]=S,e[60]=N,e[61]=P):P=e[61];let I;e[62]!==d||e[63]!==P||e[64]!==j||e[65]!==y?(I=t.jsxs(d,{className:j,children:[y,P]}),e[62]=d,e[63]=P,e[64]=j,e[65]=y,e[66]=I):I=e[66];const T=C?.user?.name;let b;e[67]!==T?(b=t.jsx("p",{className:"text-sm font-medium text-foreground leading-none",children:T}),e[67]=T,e[68]=b):b=e[68];const v=C?.user?.email;let D;e[69]!==v?(D=t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:v}),e[69]=v,e[70]=D):D=e[70];let A;e[71]!==b||e[72]!==D?(A=t.jsxs("div",{className:"flex-1 min-w-0",children:[b,D]}),e[71]=b,e[72]=D,e[73]=A):A=e[73];let H;e[74]!==I||e[75]!==A||e[76]!==w?(H=t.jsxs("div",{className:w,children:[I,A]}),e[74]=I,e[75]=A,e[76]=w,e[77]=H):H=e[77];let te;e[78]!==l||e[79]!==H||e[80]!==z?(te=t.jsx(l,{className:z,children:H}),e[78]=l,e[79]=H,e[80]=z,e[81]=te):te=e[81];let G;e[82]!==c||e[83]!==x||e[84]!==te?(G=t.jsxs(c,{children:[x,te]}),e[82]=c,e[83]=x,e[84]=te,e[85]=G):G=e[85];let Q;e[86]!==a.content?(Q=t.jsx("span",{className:"text-sm text-muted-foreground",children:a.content}),e[86]=a.content,e[87]=Q):Q=e[87];let W;e[88]!==a.createdAt?(W=Rt(a.createdAt,{addSuffix:!0}),e[88]=a.createdAt,e[89]=W):W=e[89];let V;e[90]!==W?(V=t.jsx("span",{className:"text-xs text-muted-foreground/60 ml-auto flex-shrink-0",children:W}),e[90]=W,e[91]=V):V=e[91];let X;e[92]!==p||e[93]!==G||e[94]!==Q||e[95]!==V?(X=t.jsxs("div",{className:p,children:[G,Q,V]}),e[92]=p,e[93]=G,e[94]=Q,e[95]=V,e[96]=X):X=e[96];let xe;return e[97]!==i||e[98]!==E||e[99]!==k||e[100]!==X?(xe=t.jsxs("div",{className:i,children:[E,k,X]}),e[97]=i,e[98]=E,e[99]=k,e[100]=X,e[101]=xe):xe=e[101],xe}async function na({taskId:s,content:e,userId:a}){const o=await Le.activity.comment.$post({json:{taskId:s,content:e,userId:a}});if(!o.ok){const u=await o.text();throw new Error(u)}return await o.json()}function oa(){const s=ee.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:na},s[0]=e):e=s[0],gt(e)}function la(s){const e=ee.c(39),{taskId:a,userId:o}=s,{theme:r}=Xe(),[u,h]=g.useState(""),{mutateAsync:f,isPending:m}=oa(),n=Ye();let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d={initialContent:[{type:"paragraph",content:""}]},e[0]=d):d=e[0];const l=et(d);let c;e[1]!==l?(c=async()=>{try{const T=await l.blocksToMarkdownLossy(l.document);h(T.trim())}catch(T){console.error("Failed to convert blocks to markdown:",T)}},e[1]=l,e[2]=c):c=e[2];const x=c;let p;e[3]!==u||e[4]!==f||e[5]!==l||e[6]!==n||e[7]!==a||e[8]!==o?(p=async()=>{if(!u.trim()){U.error("Comment cannot be empty");return}try{await f({taskId:a,userId:o,content:u});const T=await l.tryParseMarkdownToBlocks("");l.replaceBlocks(l.document,T),h(""),await n.invalidateQueries({queryKey:["activities",a]}),U.success("Comment added")}catch(T){console.error("Failed to create comment:",T),U.error("Failed to add comment")}},e[3]=u,e[4]=f,e[5]=l,e[6]=n,e[7]=a,e[8]=o,e[9]=p):p=e[9];const i=p;let E;e[10]!==l.domElement||e[11]!==i?(E=()=>{const T=v=>{(v.metaKey||v.ctrlKey)&&v.key==="Enter"&&(v.preventDefault(),i())},b=l.domElement;return b?.addEventListener("keydown",T),()=>{b?.removeEventListener("keydown",T)}},e[10]=l.domElement,e[11]=i,e[12]=E):E=e[12];let k;e[13]!==l||e[14]!==i?(k=[l,i],e[13]=l,e[14]=i,e[15]=k):k=e[15],g.useEffect(E,k);const _=r;let S;e[16]!==l?(S=t.jsx(st,{formattingToolbar:()=>t.jsx(ue,{children:t.jsxs("div",{className:"bg-popover flex items-center gap-0.5 px-1.5 py-1 rounded-md border border-border shadow-lg",children:[t.jsx("div",{className:"[&_button]:h-6 [&_button]:px-2 [&_button]:text-xs [&_svg]:size-3",children:t.jsx(at,{items:[{name:"Paragraph",type:"paragraph",icon:rt,props:{},isSelected:fa},{name:"Heading 1",type:"heading",icon:nt,props:{level:1},isSelected:pa},{name:"Heading 2",type:"heading",icon:ot,props:{level:2},isSelected:ua},{name:"Heading 3",type:"heading",icon:lt,props:{level:3},isSelected:ma},{name:"Bullet List",type:"bulletListItem",icon:bt,props:{},isSelected:da},{name:"Numbered List",type:"numberedListItem",icon:it,props:{},isSelected:ca}]},"blockTypeSelect")}),t.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>l.toggleStyles({bold:!0}),className:F("h-6 w-6 p-0",l.getActiveStyles().bold&&"bg-accent text-accent-foreground"),children:t.jsx(ct,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"B"],description:"Bold"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>l.toggleStyles({italic:!0}),className:F("h-6 w-6 p-0",l.getActiveStyles().italic&&"bg-accent text-accent-foreground"),children:t.jsx(dt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"I"],description:"Italic"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>l.toggleStyles({underline:!0}),className:F("h-6 w-6 p-0",l.getActiveStyles().underline&&"bg-accent text-accent-foreground"),children:t.jsx(mt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"U"],description:"Underline"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>l.toggleStyles({code:!0}),className:F("h-6 w-6 p-0",l.getActiveStyles().code&&"bg-accent text-accent-foreground"),children:t.jsx(yt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"E"],description:"Code"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>l.toggleStyles({strike:!0}),className:F("h-6 w-6 p-0",l.getActiveStyles().strike&&"bg-accent text-accent-foreground"),children:t.jsx(ut,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"Shift","X"],description:"Strikethrough"})})]}),t.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),t.jsx(pt,{},"createLinkButton")]})})}),e[16]=l,e[17]=S):S=e[17];let N;e[18]!==l?(N=t.jsx(ft,{triggerCharacter:"/",getItems:async T=>xt(ht(l).filter(ia),T)}),e[18]=l,e[19]=N):N=e[19];let j;e[20]!==l||e[21]!==x||e[22]!==_||e[23]!==S||e[24]!==N?(j=t.jsxs(tt,{editor:l,className:"min-h-[42px] max-h-[300px] overflow-y-auto [&>div:first-of-type]:!pl-3 [&>div:first-of-type]:!pr-20 [&>div:first-of-type]:!py-2.5 [&>div:first-of-type]:!bg-transparent [&>div:first-of-type]:!min-h-[42px]","data-placeholder":"Leave a comment...",formattingToolbar:!1,linkToolbar:!1,filePanel:!1,sideMenu:!1,slashMenu:!1,tableHandles:!1,theme:_,onChange:x,children:[S,N]}),e[20]=l,e[21]=x,e[22]=_,e[23]=S,e[24]=N,e[25]=j):j=e[25];let y;e[26]!==u||e[27]!==m?(y=m||!u.trim(),e[26]=u,e[27]=m,e[28]=y):y=e[28];let w;e[29]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(Ks,{className:"size-4"}),e[29]=w):w=e[29];let z;e[30]!==i||e[31]!==y?(z=t.jsx(M,{asChild:!0,children:t.jsx(L,{size:"xs",onClick:i,disabled:y,className:"h-6 w-6 p-4 text-white",children:w})}),e[30]=i,e[31]=y,e[32]=z):z=e[32];let C;e[33]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(B,{children:t.jsx($,{keys:[K(),"Enter"],description:"Submit comment"})}),e[33]=C):C=e[33];let P;e[34]!==z?(P=t.jsx("div",{className:"absolute right-2 bottom-0 -translate-y-1/2 flex items-center gap-1",children:t.jsx(ue,{children:t.jsxs(R,{children:[z,C]})})}),e[34]=z,e[35]=P):P=e[35];let I;return e[36]!==P||e[37]!==j?(I=t.jsx("div",{className:"w-full",children:t.jsxs("div",{className:"blocknote-transparent border border-border/50 rounded-lg bg-background/30 hover:border-border transition-colors focus-within:border-border relative pb-8",children:[j,P]})}),e[36]=P,e[37]=j,e[38]=I):I=e[38],I}function ia(s){return s.group!=="Media"}function ca(s){return s.type==="numberedListItem"}function da(s){return s.type==="bulletListItem"}function ma(s){return s.type==="heading"&&s.props.level===3}function ua(s){return s.type==="heading"&&s.props.level===2}function pa(s){return s.type==="heading"&&s.props.level===1}function fa(s){return s.type==="paragraph"}async function xa(s){const e=await Le.task[":id"].$get({param:{id:s}});if(!e.ok){const o=await e.text();throw new Error(o)}return await e.json()}function Ue(s){const e=ee.c(2);let a;return e[0]!==s?(a={queryKey:["task",s],queryFn:()=>xa(s),refetchOnMount:"always",staleTime:0},e[0]=s,e[1]=a):a=e[1],Ze(a)}function ha(s){const e=ee.c(38),{taskId:a,projectId:o,workspaceId:r,headerActions:u,children:h,rightSidebar:f}=s,{data:m}=Je();let n;e[0]!==o||e[1]!==r?(n={id:o,workspaceId:r},e[0]=o,e[1]=r,e[2]=n):n=e[2];const{data:d}=Ft(n),{data:l}=Ue(a);let c;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(M,{asChild:!0,children:t.jsx(Cs,{className:"-ml-1 h-6 w-6 cursor-pointer text-muted-foreground"})}),e[3]=c):c=e[3];let x,p;e[4]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(ue,{children:t.jsxs(R,{children:[c,t.jsx(B,{children:t.jsxs("p",{className:"flex items-center gap-2 text-[10px]",children:["Toggle sidebar",t.jsx($,{keys:[kt.sidebar.prefix,kt.sidebar.toggle]})]})})]})}),p=t.jsx(Ns,{orientation:"vertical",className:"mx-1.5 data-[orientation=vertical]:h-2.5"}),e[4]=x,e[5]=p):(x=e[4],p=e[5]);const i=`/dashboard/workspace/${r}`,E=m?.name;let k;e[6]!==E?(k=t.jsx("h1",{className:"text-xs text-muted-foreground",children:E}),e[6]=E,e[7]=k):k=e[7];let _;e[8]!==i||e[9]!==k?(_=t.jsx(Ge,{children:t.jsx(Nt,{href:i,children:k})}),e[8]=i,e[9]=k,e[10]=_):_=e[10];let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(Ct,{}),e[11]=S):S=e[11];const N=`/dashboard/workspace/${r}/project/${o}/board`,j=d?.name;let y;e[12]!==j?(y=t.jsx("h1",{className:"text-xs text-muted-foreground",children:j}),e[12]=j,e[13]=y):y=e[13];let w;e[14]!==N||e[15]!==y?(w=t.jsx(Ge,{children:t.jsx(Nt,{href:N,children:y})}),e[14]=N,e[15]=y,e[16]=w):w=e[16];let z;e[17]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(Ct,{}),e[17]=z):z=e[17];const C=d?.slug,P=l?.number;let I;e[18]!==C||e[19]!==P?(I=t.jsx(Ge,{children:t.jsxs("h1",{className:"text-xs text-muted-foreground",children:[C,"-",P]})}),e[18]=C,e[19]=P,e[20]=I):I=e[20];let T;e[21]!==w||e[22]!==I||e[23]!==_?(T=t.jsxs("div",{className:"flex items-center gap-1 w-full",children:[x,p,t.jsx(ws,{className:"flex items-center text-xs w-full",children:t.jsxs(ks,{className:"!gap-1",children:[_,S,w,z,I]})})]}),e[21]=w,e[22]=I,e[23]=_,e[24]=T):T=e[24];let b;e[25]!==u?(b=t.jsx("div",{className:"flex items-center gap-1.5",children:u}),e[25]=u,e[26]=b):b=e[26];let v;e[27]!==T||e[28]!==b?(v=t.jsx(qe.Header,{className:"sticky top-0 z-10",children:t.jsxs("div",{className:"flex items-center justify-between w-full",children:[T,b]})}),e[27]=T,e[28]=b,e[29]=v):v=e[29];let D;e[30]!==h?(D=t.jsx(qe.Content,{children:t.jsx("div",{className:"flex h-full",children:t.jsx("div",{className:"flex-1 min-w-0",children:h})})}),e[30]=h,e[31]=D):D=e[31];let A;e[32]!==v||e[33]!==D?(A=t.jsxs("div",{className:"flex-1",children:[v,D]}),e[32]=v,e[33]=D,e[34]=A):A=e[34];let H;return e[35]!==f||e[36]!==A?(H=t.jsxs(qe,{className:"flex flex-row",children:[A,f]}),e[35]=f,e[36]=A,e[37]=H):H=e[37],H}function ga({task:s,workspaceId:e,children:a}){const[o,r]=g.useState(!1),{mutateAsync:u}=Ts(),{data:h}=$t(e),f=g.useMemo(()=>h?.members?.map(n=>({label:n?.user?.name??n.userId,value:n.userId,image:n?.user?.image??"",name:n?.user?.name??""})),[h]),m=async n=>{try{await u({...s,userId:n}),r(!1)}catch(d){U.error(d instanceof Error?d.message:"Failed to update task assignee")}};return t.jsxs(Ee,{open:o,onOpenChange:r,children:[t.jsx(Pe,{asChild:!0,children:a}),t.jsx(Ae,{className:"w-48 p-1",align:"start",children:t.jsxs("div",{className:"space-y-1",children:[t.jsxs(L,{variant:"ghost",size:"sm",className:"w-full justify-start gap-2 h-8 px-2",onClick:()=>m(""),children:[t.jsx("div",{className:"w-6 h-6 rounded-full bg-muted border border-border flex items-center justify-center",title:"Unassigned",children:t.jsx("span",{className:"text-[10px] font-medium text-muted-foreground",children:"?"})}),t.jsx("span",{className:"text-sm",children:"Unassigned"}),!s.userId&&t.jsx(je,{className:"ml-auto h-4 w-4"})]}),f?.map(n=>t.jsxs(L,{variant:"ghost",size:"sm",className:"w-full justify-start gap-2 h-8 px-2",onClick:()=>m(n.value),children:[t.jsxs(Se,{className:"h-6 w-6",children:[t.jsx(Te,{src:n.image??"",alt:n.name||""}),t.jsx(_e,{className:"text-xs font-medium border border-border/30",children:n.name?.charAt(0).toUpperCase()})]}),t.jsx("span",{className:"text-sm",children:n.label}),s.userId===n.value&&t.jsx(je,{className:"ml-auto h-4 w-4"})]},n.value))]})})]})}function ss(s,e){let a;return(...o)=>{clearTimeout(a),a=setTimeout(()=>s(...o),e)}}function ja({taskId:s}){const{data:e}=Ue(s),{mutateAsync:a}=_s(),{theme:o}=Xe(),r=g.useRef(!1),u=g.useRef(!1),h=g.useRef(e),f=g.useRef(a);g.useEffect(()=>{h.current=e,f.current=a},[e,a]);const m=Ut({values:{description:e?.description||""}}),n=et({initialContent:[{type:"paragraph",content:""}]});g.useEffect(()=>{e?.description?.trim()&&!r.current?(async()=>{u.current=!0;try{const x=await n.tryParseMarkdownToBlocks(e.description||"");n.replaceBlocks(n.document,x),setTimeout(()=>{r.current=!0,u.current=!1},100)}catch{const x=await n.tryParseMarkdownToBlocks("");n.replaceBlocks(n.document,x),setTimeout(()=>{r.current=!0,u.current=!1},100)}})():!e?.description?.trim()&&!r.current&&(async()=>{u.current=!0;const x=await n.tryParseMarkdownToBlocks("");n.replaceBlocks(n.document,x),setTimeout(()=>{r.current=!0,u.current=!1},100)})()},[e?.description,n]);const d=g.useCallback(ss(async c=>{if(!r.current)return;const x=h.current,p=f.current;if(!(!x||!p))try{await p({...x,description:c})}catch(i){console.error("Failed to update description:",i)}},800),[]),l=g.useCallback(async()=>{if(!(!r.current||u.current))try{const c=await n.blocksToMarkdownLossy(n.document);m.setValue("description",c),d(c)}catch(c){console.error("Failed to convert blocks to markdown:",c)}},[n,m,d]);return t.jsx(Kt,{...m,children:t.jsx(qt,{control:m.control,name:"description",render:()=>t.jsx(Gt,{children:t.jsx("div",{className:"blocknote-transparent",children:t.jsxs(tt,{editor:n,className:"min-h-[200px] [&>div:first-of-type]:!pl-0 [&>div:first-of-type]:!bg-transparent","data-placeholder":"Add a description...",formattingToolbar:!1,linkToolbar:!1,filePanel:!1,sideMenu:!1,slashMenu:!1,tableHandles:!1,theme:o,onChange:l,children:[t.jsx(st,{formattingToolbar:()=>t.jsx(ue,{children:t.jsxs("div",{className:"bg-sidebar flex items-center gap-0.5 px-1.5 py-1 rounded-md border border-border shadow-sm",children:[t.jsx("div",{className:"[&_button]:h-6 [&_button]:px-2 [&_button]:text-xs [&_svg]:size-3",children:t.jsx(at,{items:[{name:"Paragraph",type:"paragraph",icon:rt,props:{},isSelected:c=>c.type==="paragraph"},{name:"Heading 1",type:"heading",icon:nt,props:{level:1},isSelected:c=>c.type==="heading"&&c.props.level===1},{name:"Heading 2",type:"heading",icon:ot,props:{level:2},isSelected:c=>c.type==="heading"&&c.props.level===2},{name:"Heading 3",type:"heading",icon:lt,props:{level:3},isSelected:c=>c.type==="heading"&&c.props.level===3},{name:"Bullet List",type:"bulletListItem",icon:bt,props:{},isSelected:c=>c.type==="bulletListItem"},{name:"Numbered List",type:"numberedListItem",icon:it,props:{},isSelected:c=>c.type==="numberedListItem"}]},"blockTypeSelect")}),t.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>n.toggleStyles({bold:!0}),className:F("h-6 w-6 p-0",n.getActiveStyles().bold&&"bg-accent text-accent-foreground"),children:t.jsx(ct,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"B"],description:"Bold"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>n.toggleStyles({italic:!0}),className:F("h-6 w-6 p-0",n.getActiveStyles().italic&&"bg-accent text-accent-foreground"),children:t.jsx(dt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"I"],description:"Italic"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>n.toggleStyles({underline:!0}),className:F("h-6 w-6 p-0",n.getActiveStyles().underline&&"bg-accent text-accent-foreground"),children:t.jsx(mt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"U"],description:"Underline"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>n.toggleStyles({code:!0}),className:F("h-6 w-6 p-0",n.getActiveStyles().code&&"bg-accent text-accent-foreground"),children:t.jsx(yt,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"E"],description:"Code"})})]}),t.jsxs(R,{children:[t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",onClick:()=>n.toggleStyles({strike:!0}),className:F("h-6 w-6 p-0",n.getActiveStyles().strike&&"bg-accent text-accent-foreground"),children:t.jsx(ut,{className:"size-3"})})}),t.jsx(B,{children:t.jsx($,{keys:[K(),"Shift","X"],description:"Strikethrough"})})]}),t.jsx("div",{className:"w-px h-4 bg-border mx-0.5"}),t.jsx(pt,{},"createLinkButton")]})})}),t.jsx(ft,{triggerCharacter:"/",getItems:async c=>xt(ht(n).filter(x=>x.group!=="Media"),c)})]})})})})})}function ba({task:s,children:e}){const[a,o]=g.useState(!1),{mutateAsync:r}=Ls(),u=async h=>{try{await r({...s,dueDate:h?.toISOString()||null}),U.success("Task due date updated successfully"),o(!1)}catch(f){U.error(f instanceof Error?f.message:"Failed to update task due date")}};return t.jsxs(Ee,{open:a,onOpenChange:o,children:[t.jsx(Pe,{asChild:!0,children:e}),t.jsx(Ae,{className:"p-0",align:"start",children:t.jsx(hs,{mode:"single",selected:s.dueDate?new Date(s.dueDate):void 0,onSelect:u,className:"w-full bg-popover"})})]})}async function ya({id:s}){const e=await Le.label[":id"].$delete({param:{id:s}});if(!e.ok){const o=await e.text();throw new Error(o)}return await e.json()}function va(){const s=ee.c(1);let e;return s[0]===Symbol.for("react.memo_cache_sentinel")?(e={mutationFn:ya},s[0]=e):e=s[0],gt(e)}const Ve=[{value:"gray",label:"Stone",color:"#78716c"},{value:"dark-gray",label:"Slate",color:"#64748b"},{value:"purple",label:"Lavender",color:"#8b5cf6"},{value:"teal",label:"Sage",color:"#059669"},{value:"green",label:"Forest",color:"#16a34a"},{value:"yellow",label:"Amber",color:"#d97706"},{value:"orange",label:"Terracotta",color:"#ea580c"},{value:"pink",label:"Rose",color:"#e11d48"},{value:"red",label:"Crimson",color:"#dc2626"}];function Lt({task:s,workspaceId:e,children:a}){const[o,r]=g.useState(!1),[u,h]=g.useState("select"),[f,m]=g.useState(""),[n,d]=g.useState("gray"),[l,c]=g.useState(""),x=g.useRef(null),p=Ye(),{mutateAsync:i}=gs(),{mutateAsync:E}=va(),{data:k=[]}=Ht(s.id),{data:_=[]}=js(e),S=g.useMemo(()=>k.map(b=>b.name),[k]),N=g.useMemo(()=>{const b=_.filter(D=>D.name.toLowerCase().includes(f.toLowerCase())),v=new Map;for(const D of b){const A=v.get(D.name);(!A||D.taskId===null&&A.taskId!==null)&&v.set(D.name,D)}return Array.from(v.values())},[_,f]),j=g.useMemo(()=>f&&!_.some(b=>b.name.toLowerCase()===f.toLowerCase()),[_,f]);g.useEffect(()=>{o&&u==="select"&&x.current&&setTimeout(()=>x.current?.focus(),100)},[o,u]);const y=()=>{h("select"),m(""),c(""),d("gray")},w=()=>{r(!1),setTimeout(y,200)},z=async b=>{try{const v=_.find(A=>A.id===b);if(!v)return;if(S.includes(v.name)){const A=k.find(H=>H.name===v.name);A?.id&&(await E({id:A.id}),U.success("Label removed"))}else await i({name:v.name,color:v.color,taskId:s.id,workspaceId:e}),U.success("Label added");await p.invalidateQueries({queryKey:["labels",s.id]}),await p.invalidateQueries({queryKey:["labels",e]})}catch(v){U.error(v instanceof Error?v.message:"Failed to update label")}},C=()=>{c(f),h("color")},P=async b=>{if(d(b),!!l.trim())try{await i({name:l.trim(),color:b,workspaceId:e}),await i({name:l.trim(),color:b,taskId:s.id,workspaceId:e}),await p.invalidateQueries({queryKey:["labels",s.id]}),await p.invalidateQueries({queryKey:["labels",e]}),U.success("Label created and added"),w()}catch(v){U.error(v instanceof Error?v.message:"Failed to create label")}},I=()=>t.jsxs("div",{className:"w-auto",children:[t.jsxs("div",{className:"flex items-center gap-2 p-2 border-b border-border",children:[t.jsx(Is,{className:"w-3 h-3 text-muted-foreground"}),t.jsx(Qt,{ref:x,value:f,onChange:b=>m(b.target.value),placeholder:"Search labels...",className:"border-none p-0 h-auto focus-visible:ring-0 shadow-none !bg-transparent"})]}),t.jsxs("div",{className:"py-1",children:[N.length===0&&f.length===0&&t.jsx("span",{className:"text-xs text-muted-foreground px-2",children:"No labels found"}),N.map(b=>t.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 px-2 py-1.5 text-xs hover:bg-accent/50 text-left",onClick:()=>z(b.id),children:[t.jsx("div",{className:"flex-shrink-0 w-3 flex justify-center",children:S.includes(b.name)&&t.jsx(je,{className:"w-3 h-3"})}),t.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:Ve.find(v=>v.value===b.color)?.color||"#94a3b8"}}),t.jsx("span",{className:"truncate",children:b.name})]},b.id)),j&&N.length>0&&t.jsx("div",{className:"border-t border-border my-1"}),j&&t.jsxs("button",{type:"button",className:"w-full flex items-center gap-2 px-2 py-1.5 text-xs hover:bg-accent/50 text-left",onClick:C,children:[t.jsx("div",{className:"flex-shrink-0 w-3 flex justify-center",children:t.jsx(Bt,{className:"w-3 h-3"})}),t.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:Ve.find(b=>b.value===n)?.color||"#94a3b8"}}),t.jsxs("span",{className:"truncate",children:['Create "',f,'"']})]})]})]}),T=()=>t.jsxs("div",{className:"w-auto",children:[t.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border",children:[t.jsx("span",{className:"text-xs font-medium",children:"Choose color"}),t.jsx("button",{type:"button",onClick:()=>h("select"),className:"w-4 h-4 flex items-center justify-center hover:bg-accent/50 rounded",children:t.jsx(Dt,{className:"h-3 w-3"})})]}),t.jsx("div",{className:"py-1",children:Ve.map(b=>t.jsxs("button",{type:"button",className:F("w-full flex items-center gap-2 px-2 py-1.5 text-xs hover:bg-accent/50 text-left",n===b.value&&"bg-accent/30"),onClick:()=>P(b.value),children:[t.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:b.color}}),t.jsx("span",{className:"truncate",children:b.label}),n===b.value&&t.jsx(je,{className:"w-3 h-3 ml-auto"})]},b.value))})]});return t.jsxs(Ee,{open:o,onOpenChange:r,children:[t.jsx(Pe,{asChild:!0,children:a}),t.jsxs(Ae,{className:"p-0",align:"start",children:[u==="select"&&I(),u==="color"&&T()]})]})}const wa=[{value:"no-priority",label:"No Priority"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}];function ka(s){const e=ee.c(14),{task:a,children:o}=s,[r,u]=g.useState(!1),{mutateAsync:h}=Es();let f;e[0]!==a||e[1]!==h?(f=async x=>{try{await h({...a,priority:x}),u(!1)}catch(p){const i=p;U.error(i instanceof Error?i.message:"Failed to update task priority")}},e[0]=a,e[1]=h,e[2]=f):f=e[2];const m=f;let n;e[3]!==o?(n=t.jsx(Pe,{asChild:!0,children:o}),e[3]=o,e[4]=n):n=e[4];let d;e[5]!==m||e[6]!==a?(d=wa.map(x=>t.jsxs(L,{variant:"ghost",size:"sm",className:"w-full justify-start gap-2 h-8 px-2",onClick:()=>m(x.value),children:[Mt(x.value),t.jsx("span",{className:"text-sm",children:x.label}),a.priority===x.value&&t.jsx(je,{className:"ml-auto h-4 w-4"})]},x.value)),e[5]=m,e[6]=a,e[7]=d):d=e[7];let l;e[8]!==d?(l=t.jsx(Ae,{className:"w-48 p-1",align:"start",children:t.jsx("div",{className:"space-y-1",children:d})}),e[8]=d,e[9]=l):l=e[9];let c;return e[10]!==r||e[11]!==n||e[12]!==l?(c=t.jsxs(Ee,{open:r,onOpenChange:u,children:[n,l]}),e[10]=r,e[11]=n,e[12]=l,e[13]=c):c=e[13],c}const Na=[{value:"to-do",label:"To Do"},{value:"in-progress",label:"In Progress"},{value:"in-review",label:"In Review"},{value:"done",label:"Done"}];function Ca(s){const e=ee.c(14),{task:a,children:o}=s,[r,u]=g.useState(!1),{mutateAsync:h}=Ps();let f;e[0]!==a||e[1]!==h?(f=async x=>{try{await h({...a,status:x}),u(!1)}catch(p){const i=p;U.error(i instanceof Error?i.message:"Failed to update task status")}},e[0]=a,e[1]=h,e[2]=f):f=e[2];const m=f;let n;e[3]!==o?(n=t.jsx(Pe,{asChild:!0,children:o}),e[3]=o,e[4]=n):n=e[4];let d;e[5]!==m||e[6]!==a?(d=Na.map(x=>t.jsxs(L,{variant:"ghost",size:"sm",className:"w-full justify-start gap-2 h-8 px-2",onClick:()=>m(x.value),children:[Ot(x.value),t.jsx("span",{className:"text-sm",children:x.label}),a.status===x.value&&t.jsx(je,{className:"ml-auto h-4 w-4"})]},x.value)),e[5]=m,e[6]=a,e[7]=d):d=e[7];let l;e[8]!==d?(l=t.jsx(Ae,{className:"w-48 p-1",align:"start",children:t.jsx("div",{className:"space-y-1",children:d})}),e[8]=d,e[9]=l):l=e[9];let c;return e[10]!==r||e[11]!==n||e[12]!==l?(c=t.jsxs(Ee,{open:r,onOpenChange:u,children:[n,l]}),e[10]=r,e[11]=n,e[12]=l,e[13]=c):c=e[13],c}function Sa({taskId:s}){const{data:e}=Ue(s),{mutateAsync:a}=As(),o=g.useRef(!1),r=g.useRef(e),u=g.useRef(a);g.useEffect(()=>{r.current=e,u.current=a},[e,a]);const h=Ut({values:{title:e?.title||""}});g.useEffect(()=>{e?.title!==void 0&&!o.current&&setTimeout(()=>{o.current=!0},100)},[e?.title]);const f=g.useCallback(ss(async n=>{if(!o.current)return;const d=r.current,l=u.current;if(!(!d||!l))try{await l({...d,title:n}),console.log("Title updated successfully")}catch(c){console.error("Failed to update title:",c)}},800),[]),m=g.useCallback(n=>{if(!o.current){console.log("Title change ignored - not initialized yet");return}console.log("Title changed:",n),f(n)},[f]);return t.jsx(Kt,{...h,children:t.jsx(qt,{control:h.control,name:"title",render:({field:n})=>t.jsx(Gt,{children:t.jsx(Qt,{...n,placeholder:"Click to add a title",className:"!text-2xl font-semibold !border-0 px-0 py-3 !shadow-none focus-visible:!ring-0 !bg-transparent text-zinc-900 dark:text-white placeholder:text-zinc-500 dark:placeholder:text-zinc-400 tracking-tight focus:!outline-none focus-visible:!outline-none",onChange:d=>{n.onChange(d),m(d.target.value)}})})})})}async function Ta({taskId:s}){const e=await Le.activity[":taskId"].$get({param:{taskId:s}});if(!e.ok){const o=await e.text();throw new Error(o)}return await e.json()}function _a(s){const e=ee.c(2);let a;return e[0]!==s?(a={queryKey:["activities",s],queryFn:()=>Ta({taskId:s})},e[0]=s,e[1]=a):a=e[1],Ze(a)}function Et(s){return s?.replace(/ /g,"-").toLowerCase().replace(/^-|-$/g,"")}function Pt(s){return s&&s.replace(/[-_]/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function Or(){const s=ee.c(125),{projectId:e,workspaceId:a,taskId:o}=ns.useParams(),{data:r}=Ue(o);let u;s[0]!==e||s[1]!==a?(u={id:e,workspaceId:a},s[0]=e,s[1]=a,s[2]=u):u=s[2];const{data:h}=Ft(u),{data:f}=Je(),{data:m}=$t(a),{data:n}=Ht(o);let d;s[3]!==n?(d=n===void 0?[]:n,s[3]=n,s[4]=d):d=s[4];const l=d,{data:c}=_a(o);let x;s[5]!==c?(x=c===void 0?[]:c,s[5]=c,s[6]=x):x=s[6];const p=x,{user:i}=At(),E=f?.name,k=h?.slug,_=r?.number;let S,N,j,y,w,z,C,P,I,T;if(s[7]!==e||s[8]!==k||s[9]!==r||s[10]!==o||s[11]!==_||s[12]!==a||s[13]!==E||s[14]!==m?.members){const O=m?.members?.find(as=>as.userId===r?.userId);let pe;s[25]!==e||s[26]!==o||s[27]!==a?(pe=()=>{navigator.clipboard.writeText(`${window.location.origin}/workspace/${a}/project/${e}/task/${o}`),U.message("Task link copied to clipboard")},s[25]=e,s[26]=o,s[27]=a,s[28]=pe):pe=s[28];const Ce=pe;let ze;s[29]!==k||s[30]!==_||s[31]!==E?(ze=()=>{navigator.clipboard.writeText(`${Et(E)}/${Et(k)}-${_}`),U.message("Task branch copied to clipboard")},s[29]=k,s[30]=_,s[31]=E,s[32]=ze):ze=s[32];const Ke=ze;S=ha,j=o,y=e,w=a,T="w-72 bg-sidebar border-l border-border flex flex-col gap-2 sticky top-0 right-0";let Ie;s[33]===Symbol.for("react.memo_cache_sentinel")?(Ie=t.jsx("p",{className:"text-sm font-medium text-muted-foreground flex-1",children:"Properties"}),s[33]=Ie):Ie=s[33];let be;s[34]!==Ce?(be=()=>Ce(),s[34]=Ce,s[35]=be):be=s[35];let De;s[36]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx(Fs,{className:"size-4"}),s[36]=De):De=s[36];let ye;s[37]!==be?(ye=t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",className:"text-muted-foreground",onClick:be,children:De})}),s[37]=be,s[38]=ye):ye=s[38];let Re;s[39]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx(B,{children:t.jsx($,{keys:["Ctrl","Shift","C"],description:"Copy task link",separator:""})}),s[39]=Re):Re=s[39];let ve;s[40]!==ye?(ve=t.jsx(ue,{children:t.jsxs(R,{children:[ye,Re]})}),s[40]=ye,s[41]=ve):ve=s[41];let we;s[42]!==Ke?(we=()=>Ke(),s[42]=Ke,s[43]=we):we=s[43];let Me;s[44]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx(Ds,{className:"size-4"}),s[44]=Me):Me=s[44];let ke;s[45]!==we?(ke=t.jsx(M,{asChild:!0,children:t.jsx(L,{variant:"ghost",size:"xs",className:"text-muted-foreground",onClick:we,children:Me})}),s[45]=we,s[46]=ke):ke=s[46];let Be;s[47]===Symbol.for("react.memo_cache_sentinel")?(Be=t.jsx(B,{children:t.jsx($,{keys:["Ctrl","Shift","G"],description:"Copy task branch",separator:""})}),s[47]=Be):Be=s[47];let Ne;s[48]!==ke?(Ne=t.jsx(ue,{children:t.jsxs(R,{children:[ke,Be]})}),s[48]=ke,s[49]=Ne):Ne=s[49],s[50]!==ve||s[51]!==Ne?(N=t.jsxs("div",{className:"flex gap-2 p-4 px-6",children:[Ie,ve,Ne]}),s[50]=ve,s[51]=Ne,s[52]=N):N=s[52],z="flex flex-col gap-2 items-start px-4",s[53]!==r?(C=r&&t.jsx(Ca,{task:r,children:t.jsxs(L,{variant:"ghost",size:"sm",className:"w-2/4 justify-start",children:[Ot(r.status??""),t.jsx("span",{className:"text-xs font-semibold",children:Pt(r.status)})]})}),s[53]=r,s[54]=C):C=s[54],s[55]!==r?(P=r&&t.jsx(ka,{task:r,children:t.jsxs(L,{variant:"ghost",size:"sm",className:"w-2/4 justify-start",children:[Mt(r.priority??""),t.jsx("span",{className:"text-xs font-semibold",children:Pt(r.priority??"")})]})}),s[55]=r,s[56]=P):P=s[56],I=r&&t.jsx(ga,{task:r,workspaceId:a,children:t.jsxs(L,{variant:"ghost",size:"sm",className:"w-2/4 justify-start pl-3",children:[r.userId?t.jsxs(Se,{className:"h-[20px] w-[20px]",children:[t.jsx(Te,{src:O?.user?.image??"",alt:O?.user?.name||""}),t.jsx(_e,{className:"text-xs font-medium border border-border/30 flex-shrink-0 h-[20px] w-[20px]",children:O?.user?.name?.charAt(0).toUpperCase()})]}):t.jsx("div",{className:"w-[20px] h-[20px] rounded-full bg-muted border border-border flex items-center justify-center flex-shrink-0",title:"Unassigned",children:t.jsx("span",{className:"text-[10px] font-medium",children:"?"})}),t.jsx("span",{className:"text-xs font-semibold flex-shrink-0",children:O?.user?.name||r.assigneeName||"Unassigned"})]})}),s[7]=e,s[8]=k,s[9]=r,s[10]=o,s[11]=_,s[12]=a,s[13]=E,s[14]=m?.members,s[15]=S,s[16]=N,s[17]=j,s[18]=y,s[19]=w,s[20]=z,s[21]=C,s[22]=P,s[23]=I,s[24]=T}else S=s[15],N=s[16],j=s[17],y=s[18],w=s[19],z=s[20],C=s[21],P=s[22],I=s[23],T=s[24];let b;s[57]!==z||s[58]!==C||s[59]!==P||s[60]!==I?(b=t.jsxs("div",{className:z,children:[C,P,I]}),s[57]=z,s[58]=C,s[59]=P,s[60]=I,s[61]=b):b=s[61];let v;s[62]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx("div",{className:"w-full h-[1px] bg-border my-2"}),s[62]=v):v=s[62];let D;s[63]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:"text-xs font-medium text-muted-foreground pl-2",children:"Due date"})}),s[63]=D):D=s[63];let A;s[64]!==r?(A=r&&t.jsx(ba,{task:r,children:t.jsx(L,{variant:"ghost",size:"sm",className:"w-2/4 justify-start",children:r.dueDate?t.jsxs(t.Fragment,{children:[ge(r.dueDate)==="overdue"&&t.jsx(Ms,{className:`w-2 h-2 ${Qe[ge(r.dueDate)]}`}),ge(r.dueDate)==="due-soon"&&t.jsx(Bs,{className:`w-2 h-2 ${Qe[ge(r.dueDate)]}`}),(ge(r.dueDate)==="far-future"||ge(r.dueDate)==="no-due-date")&&t.jsx(It,{className:`w-2 h-2 ${Qe[ge(r.dueDate)]}`}),t.jsx("span",{className:"text-xs font-semibold flex-shrink-0",children:vs(new Date(r.dueDate),"MMM d, yyyy")})]}):t.jsx("span",{className:"text-sm font-semibold",children:"No due date"})})}),s[64]=r,s[65]=A):A=s[65];let H;s[66]!==A?(H=t.jsxs("div",{className:"flex flex-col gap-1",children:[D,A]}),s[66]=A,s[67]=H):H=s[67];let te;s[68]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:"text-xs font-medium text-muted-foreground pl-2",children:"Labels"})}),s[68]=te):te=s[68];let G;s[69]!==r||s[70]!==l||s[71]!==a?(G=r&&l.length>0&&l.map(O=>t.jsx(Lt,{task:r,workspaceId:a,children:t.jsxs(Rs,{variant:"outline",className:"flex items-center gap-1.5 px-2 py-1 cursor-pointer hover:bg-accent/50 transition-colors",children:[t.jsx("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:zs.find(pe=>pe.value===O.color)?.color||"#94a3b8"}}),t.jsx("span",{className:"text-xs",children:O.name})]},O.id)},`edit-${O.id}`)),s[69]=r,s[70]=l,s[71]=a,s[72]=G):G=s[72];let Q;s[73]!==r||s[74]!==a?(Q=r&&t.jsx(Lt,{task:r,workspaceId:a,children:t.jsx(L,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 rounded-full border-border hover:border-solid",children:t.jsx(Bt,{className:"h-3 w-3"})})}),s[73]=r,s[74]=a,s[75]=Q):Q=s[75];let W;s[76]!==G||s[77]!==Q?(W=t.jsxs("div",{className:"flex flex-col gap-1",children:[te,t.jsxs("div",{className:"flex flex-wrap items-center gap-2 px-2",children:[G,Q]})]}),s[76]=G,s[77]=Q,s[78]=W):W=s[78];let V;s[79]!==H||s[80]!==W?(V=t.jsxs("div",{className:"px-4 pb-4 flex flex-col gap-4",children:[H,W]}),s[79]=H,s[80]=W,s[81]=V):V=s[81];let X;s[82]!==N||s[83]!==b||s[84]!==V||s[85]!==T?(X=t.jsxs("div",{className:T,children:[N,b,v,V]}),s[82]=N,s[83]=b,s[84]=V,s[85]=T,s[86]=X):X=s[86];const xe=`${h?.slug}-${r?.number}  ${r?.title}`;let Y;s[87]!==xe?(Y=t.jsx(Ss,{title:xe,hideAppName:!0}),s[87]=xe,s[88]=Y):Y=s[88];const ne=h?.slug,he=r?.number;let oe;s[89]!==ne||s[90]!==he?(oe=t.jsxs("p",{className:"text-xs font-semibold text-muted-foreground",children:[ne,"-",he]}),s[89]=ne,s[90]=he,s[91]=oe):oe=s[91];let le,q;s[92]!==o?(le=t.jsx(Sa,{taskId:o}),q=t.jsx(ja,{taskId:o}),s[92]=o,s[93]=le,s[94]=q):(le=s[93],q=s[94]);let se;s[95]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx("span",{className:"text-sm font-medium text-muted-foreground h-[1px] bg-border w-full"}),s[95]=se):se=s[95];let ae;s[96]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("h1",{className:"text-md font-semibold",children:"Activity"}),s[96]=ae):ae=s[96];let J;s[97]!==o||s[98]!==i?(J=i?.id&&t.jsx(la,{taskId:o,userId:i.id}),s[97]=o,s[98]=i,s[99]=J):J=s[99];let ie;s[100]!==p.length?(ie=p.length===0&&t.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No activity found"}),s[100]=p.length,s[101]=ie):ie=s[101];let ce;if(s[102]!==p){let O;s[104]!==p.length?(O=(pe,Ce)=>t.jsx(ra,{activity:pe,isLast:Ce===p.length-1},pe.id),s[104]=p.length,s[105]=O):O=s[105],ce=p.map(O),s[102]=p,s[103]=ce}else ce=s[103];let de;s[106]!==ie||s[107]!==ce?(de=t.jsxs("div",{className:"flex flex-col",children:[ie,ce]}),s[106]=ie,s[107]=ce,s[108]=de):de=s[108];let me;s[109]!==J||s[110]!==de?(me=t.jsxs("div",{className:"flex flex-col gap-4 pt-8",children:[ae,J,de]}),s[109]=J,s[110]=de,s[111]=me):me=s[111];let Z;s[112]!==oe||s[113]!==le||s[114]!==q||s[115]!==me?(Z=t.jsxs("div",{className:"flex flex-col h-full min-h-0 max-w-3xl mx-auto px-4 py-8 gap-2",children:[oe,le,q,se,me]}),s[112]=oe,s[113]=le,s[114]=q,s[115]=me,s[116]=Z):Z=s[116];let re;return s[117]!==S||s[118]!==j||s[119]!==y||s[120]!==w||s[121]!==X||s[122]!==Y||s[123]!==Z?(re=t.jsxs(S,{taskId:j,projectId:y,workspaceId:w,rightSidebar:X,children:[Y,Z]}),s[117]=S,s[118]=j,s[119]=y,s[120]=w,s[121]=X,s[122]=Y,s[123]=Z,s[124]=re):re=s[124],re}export{Or as component};
